{"version":3,"sources":["firebase/context.js","firebase/config.js","firebase/firebase.js","components/sign-in-form/SignInForm.jsx","components/register-form/RegisterForm.jsx","components/auth-modal/AuthModal.jsx","components/header/Header.jsx","components/footer/Footer.jsx","service-list/serviceList.js","components/create-ticket-form/CreateTicketForm.jsx","components/ticket-popover/TicketPopover.jsx","components/ticket-control-panel/TicketControlPanel.jsx","components/ticket-actions-modal/TicketActionsModal.jsx","pages/home/HomePage.jsx","hooks/useAuth.js","hooks/useTickets.js","App.js","serviceWorker.js","index.js","assets/img/logo.png"],"names":["FirebaseContext","React","createContext","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","startNextTicket","firebase","initializeApp","config","nextTicket","tickets","categoryObject","a","category","currentDate","format","Date","ticketCollectionsRef","firestore","doc","updatedCategoryObject","current","newDoc","categoryA","categoryB","categoryC","updatedTicket","updatedTickets","i","length","id","push","update","error","console","log","message","closeCurrentTicket","currentTicket","formattedCurrentDate","closed","closedAt","createTicketDocument","ticketData","get","snapshot","customerName","telephone","email","currentUser","createdAt","exists","newTicket","createdBy","displayName","set","count","data","createNewUser","password","auth","createUserWithEmailAndPassword","then","user","createUserProfileDocument","userAuth","userRef","uid","lastLoggedIn","provider","GoogleAuthProvider","setCustomParameters","prompt","useStyles","makeStyles","theme","paper","display","flexDirection","alignItems","avatar","margin","spacing","background","form","width","marginTop","submit","submitButton","color","marginBottom","SignIn","toggleDrawer","setShowSignInForm","classes","useState","setEmail","setPassword","submitting","setSubmitting","errors","setErrors","handleSubmit","event","preventDefault","test","signInWithEmailAndPassword","general","Container","CssBaseline","className","Avatar","Typography","component","variant","onSubmit","noValidate","TextField","required","fullWidth","label","type","autoFocus","value","onChange","target","helperText","style","marginLeft","FormHelperText","Button","CircularProgress","size","position","left","alignSelf","onClick","Grid","container","justify","item","Link","href","cursor","INITIAL_VALUES","firstName","lastName","confirmPassword","RegisterForm","values","setValues","formattedFirstName","trim","formattedLastName","charAt","toUpperCase","substring","formattedEmail","userData","maxWidth","xs","drawer","flex","authButton","AuthModal","modalOpen","setModalOpen","showSignInForm","prev","Drawer","anchor","open","onClose","direction","grow","flexGrow","menuButton","marginRight","title","breakpoints","up","sectionDesktop","sectionMobile","offset","mixins","toolbar","backgroundColor","imageDiv","height","image","Header","useContext","AppBar","Toolbar","to","src","logo","alt","signOut","root","minHeight","main","footer","padding","Copyright","RouterLink","getFullYear","Footer","serviceList","name","price","duration","CreateTicketForm","setShowTicketControls","useEffect","isAdmin","names","split","typography","TicketPopover","buttonBackground","ticket","showStatusChip","anchorEl","setAnchorEl","Boolean","undefined","aria-describedby","opacity","currentTarget","Chip","right","Popover","anchorOrigin","vertical","horizontal","transformOrigin","Box","fontWeight","letterSpacing","fontSize","toDate","TicketControlPanel","ticketCollection","categoryTickets","filter","openTickets","align","justifyContent","m","reverse","map","key","Divider","find","noMoreTickets","disabled","renderActions","paddingTop","paddingBottom","ticketButton","TicketActionsModal","showTicketControls","renderOpenModalButtonLabel","buttonLabel","maxTicketsReached","renderOpenModalButton","drawerContent","renderContent","serviceListA","serviceListB","serviceListC","flexWrap","ticketGrid","HomePage","renderDate","renderGreeting","currentHour","Number","greetingMessage","renderUpcomingTickets","openUserTickets","userTicketButtons","mt","paddingLeft","paddingRight","alignContent","pb","px","md","Paper","elevation","flexdirection","service","useAuth","setCurrentUser","getUser","unsubscribeFromUserSnapshot","unsubscribe","onAuthStateChanged","onSnapshot","useTickets","setTicketCollection","ticketCollectionDoc","getTicketCollection","handleSnapshot","App","Provider","exact","path","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","module","exports"],"mappings":"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","file":"static/js/main.ec49a0e7.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst FirebaseContext = React.createContext(null);\r\n\r\nexport default FirebaseContext;\r\n","const firebaseConfig = {\r\n  apiKey: 'AIzaSyCl3YHVKc9VkTGaUqTanbJu5Y3XZKCLdME',\r\n  authDomain: 'essence-hair-salon-7d439.firebaseapp.com',\r\n  databaseURL: 'https://essence-hair-salon-7d439.firebaseio.com',\r\n  projectId: 'essence-hair-salon-7d439',\r\n  storageBucket: 'essence-hair-salon-7d439.appspot.com',\r\n  messagingSenderId: '38117558785',\r\n  appId: '1:38117558785:web:c1346e414be66d65d44e00',\r\n  measurementId: 'G-13GHD3BSGZ'\r\n};\r\n\r\nexport default firebaseConfig;\r\n","import firebase from 'firebase/app';\r\nimport { format } from 'date-fns';\r\nimport 'firebase/firestore';\r\nimport 'firebase/auth';\r\n\r\nimport config from './config';\r\n\r\nconst secondaryApp = firebase.initializeApp(config, 'Secondary');\r\n\r\n// Start next ticket\r\nexport const startNextTicket = async (nextTicket, tickets, categoryObject) => {\r\n  if (!nextTicket) return;\r\n\r\n  const { category } = nextTicket;\r\n\r\n  const currentDate = format(new Date(), 'dd-MM-yyyy');\r\n\r\n  const ticketCollectionsRef = firestore.doc(\r\n    `ticketCollections/${currentDate}`\r\n  );\r\n\r\n  const updatedCategoryObject = {\r\n    ...categoryObject,\r\n    current: categoryObject.current + 1\r\n  };\r\n\r\n  let newDoc;\r\n\r\n  // Updating current fields\r\n  if (category === 'A') {\r\n    newDoc = { categoryA: updatedCategoryObject };\r\n  } else if (category === 'B') {\r\n    newDoc = { categoryB: updatedCategoryObject };\r\n  } else {\r\n    newDoc = { categoryC: updatedCategoryObject };\r\n  }\r\n\r\n  const updatedTicket = { ...nextTicket, current: true };\r\n  let updatedTickets = [];\r\n\r\n  for (let i = 0; i < tickets.length; i++) {\r\n    if (tickets[i].id === nextTicket.id) {\r\n      updatedTickets.push(updatedTicket);\r\n    } else {\r\n      updatedTickets.push(tickets[i]);\r\n    }\r\n  }\r\n\r\n  newDoc.tickets = updatedTickets;\r\n\r\n  try {\r\n    ticketCollectionsRef.update(newDoc);\r\n  } catch (error) {\r\n    console.log(error.message);\r\n  }\r\n\r\n  return ticketCollectionsRef;\r\n};\r\n\r\n// Close current ticket\r\nexport const closeCurrentTicket = async (currentTicket, tickets) => {\r\n  if (!currentTicket) return;\r\n\r\n  const currentDate = new Date();\r\n\r\n  const formattedCurrentDate = format(currentDate, 'dd-MM-yyyy');\r\n\r\n  const ticketCollectionsRef = firestore.doc(\r\n    `ticketCollections/${formattedCurrentDate}`\r\n  );\r\n\r\n  // return console.log(currentTicket);\r\n  const updatedTicket = {\r\n    ...currentTicket,\r\n    closed: true,\r\n    current: false,\r\n    closedAt: currentDate\r\n  };\r\n\r\n  let updatedTickets = [];\r\n\r\n  for (let i = 0; i < tickets.length; i++) {\r\n    if (tickets[i].id === currentTicket.id) {\r\n      updatedTickets.push(updatedTicket);\r\n    } else {\r\n      updatedTickets.push(tickets[i]);\r\n    }\r\n  }\r\n\r\n  try {\r\n    await ticketCollectionsRef.update({\r\n      tickets: updatedTickets\r\n    });\r\n  } catch (error) {\r\n    console.log(error.message);\r\n  }\r\n\r\n  return ticketCollectionsRef;\r\n};\r\n\r\n// Create or update ticket\r\nexport const createTicketDocument = async ticketData => {\r\n  if (!ticketData) return;\r\n\r\n  const currentDate = format(new Date(), 'dd-MM-yyyy');\r\n\r\n  const ticketCollectionsRef = firestore.doc(\r\n    `ticketCollections/${currentDate}`\r\n  );\r\n\r\n  const snapshot = await ticketCollectionsRef.get();\r\n\r\n  const { customerName, category, telephone, email, currentUser } = ticketData;\r\n  const createdAt = new Date();\r\n\r\n  if (!snapshot.exists) {\r\n    // Use set method - this will only run once a day\r\n    const id = 1;\r\n\r\n    const newTicket = {\r\n      id: category + id,\r\n      customerName,\r\n      category,\r\n      telephone,\r\n      email,\r\n      createdBy: currentUser\r\n        ? {\r\n            id: currentUser.id,\r\n            displayName: currentUser.displayName,\r\n            telephone: currentUser.telephone\r\n          }\r\n        : { displayName: customerName, telephone: telephone },\r\n      createdAt,\r\n      current: false,\r\n      closed: false\r\n    };\r\n\r\n    try {\r\n      await ticketCollectionsRef.set({\r\n        categoryA: { count: category === 'A' ? 1 : 0, current: 0 },\r\n        categoryB: { count: category === 'B' ? 1 : 0, current: 0 },\r\n        categoryC: {\r\n          count: category === 'C' ? 1 : 0,\r\n          current: 0\r\n        },\r\n        tickets: [newTicket]\r\n      });\r\n    } catch (error) {\r\n      console.log(error.message);\r\n    }\r\n  } else {\r\n    // Use update method\r\n\r\n    const { categoryA, categoryB, categoryC, tickets } = snapshot.data();\r\n\r\n    let id;\r\n    let newDoc;\r\n\r\n    // Updating counts\r\n    if (category === 'A') {\r\n      id = categoryA.count + 1;\r\n      newDoc = { categoryA: { count: id, current: categoryA.current } };\r\n    } else if (category === 'B') {\r\n      id = categoryB.count + 1;\r\n      newDoc = { categoryB: { count: id, current: categoryB.current } };\r\n    } else {\r\n      id = categoryC.count + 1;\r\n      newDoc = { categoryC: { count: id, current: categoryC.current } };\r\n    }\r\n\r\n    const newTicket = {\r\n      id: category + id,\r\n      customerName,\r\n      category,\r\n      telephone,\r\n      email,\r\n      createdBy: currentUser\r\n        ? {\r\n            id: currentUser.id,\r\n            displayName: currentUser.displayName,\r\n            telephone: currentUser.telephone\r\n          }\r\n        : { displayName: customerName, telephone: telephone },\r\n      createdAt,\r\n      current: false,\r\n      closed: false\r\n    };\r\n\r\n    newDoc.tickets = [newTicket, ...tickets];\r\n\r\n    try {\r\n      await ticketCollectionsRef.update(newDoc);\r\n    } catch (error) {\r\n      console.log(error.message);\r\n    }\r\n  }\r\n\r\n  return ticketCollectionsRef;\r\n};\r\n\r\n// Create user with firebase auth as admin\r\nexport const createNewUserAsAdmin = (email, password) => {\r\n  return secondaryApp\r\n    .auth()\r\n    .createUserWithEmailAndPassword(email, password)\r\n    .then(({ user }) => {\r\n      secondaryApp.auth().signOut();\r\n      return user;\r\n    });\r\n};\r\n\r\n// Create user with firebase auth\r\nexport const createNewUser = (email, password) => {\r\n  return auth\r\n    .createUserWithEmailAndPassword(email, password)\r\n    .then(({ user }) => {\r\n      return user;\r\n    });\r\n};\r\n\r\n// Saving new user or updating existing user in Firestore\r\nexport const createUserProfileDocument = async userAuth => {\r\n  const userRef = firestore.doc(`users/${userAuth.uid}`);\r\n\r\n  const snapshot = await userRef.get();\r\n\r\n  if (!snapshot.exists) {\r\n    // Create new user\r\n    const { displayName, telephone, email } = userAuth;\r\n    const createdAt = new Date();\r\n\r\n    try {\r\n      await userRef.set({\r\n        displayName,\r\n        telephone,\r\n        email,\r\n        createdAt\r\n      });\r\n    } catch (error) {\r\n      console.log(error.message);\r\n    }\r\n  } else {\r\n    // Update user\r\n    const lastLoggedIn = new Date();\r\n\r\n    try {\r\n      await userRef.update({\r\n        lastLoggedIn\r\n      });\r\n    } catch (error) {\r\n      console.log(error.message);\r\n    }\r\n  }\r\n\r\n  return userRef;\r\n};\r\n\r\n// Initialize Firebase\r\nfirebase.initializeApp(config);\r\n\r\n// Export Auth and Firestore services\r\nexport const auth = firebase.auth();\r\nexport const firestore = firebase.firestore();\r\n\r\n// Google OAuth set up\r\nconst provider = new firebase.auth.GoogleAuthProvider();\r\nprovider.setCustomParameters({ prompt: 'select_account' });\r\n\r\n// Export signInWithGoogle method\r\nexport const signInWithGoogle = () => auth.signInWithPopup(provider);\r\n\r\n// Firebase default export\r\nexport default firebase;\r\n","import React from 'react';\r\nimport {\r\n  Avatar,\r\n  Button,\r\n  CssBaseline,\r\n  TextField,\r\n  Link,\r\n  Grid,\r\n  Typography,\r\n  Container,\r\n  CircularProgress,\r\n  FormHelperText\r\n} from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\n\r\nimport { auth, createUserProfileDocument } from '../../firebase';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  paper: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center'\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)'\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1)\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2)\r\n  },\r\n  submitButton: {\r\n    color: 'white',\r\n    marginBottom: theme.spacing(1),\r\n    background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)'\r\n  }\r\n}));\r\n\r\nexport default function SignIn({ toggleDrawer, setShowSignInForm }) {\r\n  const classes = useStyles();\r\n\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n  const [submitting, setSubmitting] = React.useState(false);\r\n  const [errors, setErrors] = React.useState({});\r\n\r\n  const handleSubmit = async event => {\r\n    event.preventDefault();\r\n\r\n    // Validation\r\n    if (!email) {\r\n      return setErrors({ email: 'Please enter your email' });\r\n    } else if (!password) {\r\n      return setErrors({ password: 'Please enter your password' });\r\n    } else if (\r\n      email &&\r\n      !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(email)\r\n    ) {\r\n      return setErrors({ email: 'Email is invalid' });\r\n    }\r\n\r\n    setErrors({});\r\n    setSubmitting(true);\r\n\r\n    try {\r\n      const { user } = await auth.signInWithEmailAndPassword(email, password);\r\n\r\n      return await createUserProfileDocument({ uid: user.uid });\r\n    } catch (error) {\r\n      console.log(error.message);\r\n      setSubmitting(false);\r\n      return setErrors({ general: error.message });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Sign in\r\n        </Typography>\r\n        <form onSubmit={handleSubmit} className={classes.form} noValidate>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"dense\"\r\n            required\r\n            fullWidth\r\n            label=\"Email\"\r\n            type=\"email\"\r\n            autoFocus\r\n            value={email}\r\n            onChange={({ target }) => setEmail(target.value)}\r\n            error={!!errors.email || !!errors.general}\r\n            helperText={\r\n              errors.email ? (\r\n                <span style={{ color: 'red', marginLeft: '-12px' }}>\r\n                  {errors.email}\r\n                </span>\r\n              ) : null\r\n            }\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"dense\"\r\n            required\r\n            fullWidth\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={({ target }) => setPassword(target.value)}\r\n            error={!!errors.password || !!errors.general}\r\n            helperText={\r\n              errors.password ? (\r\n                <span style={{ color: 'red', marginLeft: '-12px' }}>\r\n                  {errors.password}\r\n                </span>\r\n              ) : null\r\n            }\r\n          />\r\n          {errors.general && (\r\n            <FormHelperText style={{ color: 'red' }}>\r\n              {errors.general}\r\n            </FormHelperText>\r\n          )}\r\n          <div className={classes.submit}>\r\n            <Button\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              className={classes.submitButton}\r\n            >\r\n              {submitting && (\r\n                <CircularProgress\r\n                  size={20}\r\n                  style={{\r\n                    position: 'absolute',\r\n                    left: 20,\r\n                    alignSelf: 'center',\r\n                    color: 'white'\r\n                  }}\r\n                />\r\n              )}\r\n              Sign In\r\n            </Button>\r\n            <Button fullWidth onClick={toggleDrawer}>\r\n              Cancel\r\n            </Button>\r\n          </div>\r\n          <Grid container justify=\"center\">\r\n            <Grid item>\r\n              <Link href=\"#\" variant=\"body2\">\r\n                Forgot password?\r\n              </Link>\r\n            </Grid>\r\n            <Grid item>\r\n              <Link\r\n                onClick={() => setShowSignInForm(false)}\r\n                variant=\"body2\"\r\n                style={{ cursor: 'pointer' }}\r\n              >\r\n                Don't have an account? Sign up now\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n    </Container>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport {\r\n  Avatar,\r\n  Button,\r\n  CssBaseline,\r\n  TextField,\r\n  Link,\r\n  Grid,\r\n  Typography,\r\n  Container,\r\n  CircularProgress,\r\n  FormHelperText\r\n} from '@material-ui/core';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { createNewUser, createUserProfileDocument } from '../../firebase';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  paper: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center'\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)'\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(3)\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2)\r\n  },\r\n  submitButton: {\r\n    color: 'white',\r\n    marginBottom: theme.spacing(1),\r\n    background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)'\r\n  }\r\n}));\r\n\r\nconst INITIAL_VALUES = {\r\n  firstName: '',\r\n  lastName: '',\r\n  telephone: '',\r\n  email: '',\r\n  password: '',\r\n  confirmPassword: ''\r\n};\r\n\r\nexport default function RegisterForm({ toggleDrawer, setShowSignInForm }) {\r\n  const classes = useStyles();\r\n\r\n  const [values, setValues] = React.useState(INITIAL_VALUES);\r\n  const [errors, setErrors] = React.useState({});\r\n  const [submitting, setSubmitting] = React.useState(false);\r\n\r\n  const {\r\n    firstName,\r\n    lastName,\r\n    telephone,\r\n    email,\r\n    password,\r\n    confirmPassword\r\n  } = values;\r\n\r\n  const handleSubmit = async event => {\r\n    event.preventDefault();\r\n\r\n    // Validation\r\n    if (!firstName) {\r\n      return setErrors({ firstName: 'First name is required' });\r\n    } else if (!lastName) {\r\n      return setErrors({\r\n        lastName: 'Last name is required'\r\n      });\r\n    } else if (!telephone) {\r\n      return setErrors({\r\n        telephone: 'Please enter a telephone number'\r\n      });\r\n    } else if (!email) {\r\n      return setErrors({\r\n        email: 'Email is required'\r\n      });\r\n    } else if (!password) {\r\n      return setErrors({\r\n        password: 'Password is required'\r\n      });\r\n    } else if (password.length < 6) {\r\n      return setErrors({\r\n        password: 'Password must be at least 6 characters'\r\n      });\r\n    } else if (!confirmPassword) {\r\n      return setErrors({\r\n        confirmPassword: 'Please confirm password'\r\n      });\r\n    } else if (password !== confirmPassword) {\r\n      return setErrors({\r\n        confirmPassword: 'Passwords do not match'\r\n      });\r\n    } else if (\r\n      email &&\r\n      !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(email)\r\n    ) {\r\n      return setErrors({ email: 'Email is invalid' });\r\n    }\r\n\r\n    setSubmitting(true);\r\n    setErrors({});\r\n\r\n    const formattedFirstName = firstName.trim(),\r\n      formattedLastName = lastName.trim();\r\n\r\n    const displayName =\r\n      formattedFirstName.charAt(0).toUpperCase() +\r\n      formattedFirstName.substring(1) +\r\n      ' ' +\r\n      formattedLastName.charAt(0).toUpperCase() +\r\n      formattedLastName.substring(1);\r\n\r\n    const formattedEmail = email;\r\n\r\n    try {\r\n      const user = await createNewUser(formattedEmail, password);\r\n\r\n      const { uid, email } = user;\r\n\r\n      const userData = {\r\n        uid,\r\n        displayName,\r\n        telephone,\r\n        email\r\n      };\r\n\r\n      return await createUserProfileDocument(userData);\r\n    } catch (error) {\r\n      console.log(error.message);\r\n      setSubmitting(false);\r\n      return setErrors({\r\n        email: 'Email is already in use'\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Sign up\r\n        </Typography>\r\n        <form onSubmit={handleSubmit} className={classes.form} noValidate>\r\n          <Grid container spacing={1}>\r\n            <Grid item xs={6}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                margin=\"dense\"\r\n                required\r\n                fullWidth\r\n                type=\"text\"\r\n                label=\"First Name\"\r\n                autoFocus\r\n                value={firstName}\r\n                onChange={({ target }) =>\r\n                  setValues({ ...values, firstName: target.value })\r\n                }\r\n                error={!!errors.firstName}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                margin=\"dense\"\r\n                required\r\n                fullWidth\r\n                type=\"text\"\r\n                label=\"Last Name\"\r\n                value={lastName}\r\n                onChange={({ target }) =>\r\n                  setValues({ ...values, lastName: target.value })\r\n                }\r\n                error={!!errors.lastName}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n          <FormHelperText\r\n            style={{\r\n              marginLeft: '2px',\r\n              marginTop: '-2px',\r\n              marginBottom: '4px',\r\n              color: 'red'\r\n            }}\r\n          >\r\n            {errors.firstName && errors.firstName}\r\n            {errors.lastName && errors.lastName}\r\n          </FormHelperText>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"dense\"\r\n            required\r\n            fullWidth\r\n            type=\"tel\"\r\n            label=\"Telephone\"\r\n            value={telephone}\r\n            onChange={({ target }) =>\r\n              setValues({ ...values, telephone: target.value })\r\n            }\r\n            error={!!errors.telephone}\r\n            helperText={\r\n              errors.telephone ? (\r\n                <span style={{ color: 'red', marginLeft: '-12px' }}>\r\n                  {errors.telephone}\r\n                </span>\r\n              ) : null\r\n            }\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"dense\"\r\n            required\r\n            fullWidth\r\n            type=\"email\"\r\n            label=\"Email\"\r\n            value={email}\r\n            onChange={({ target }) =>\r\n              setValues({ ...values, email: target.value })\r\n            }\r\n            error={!!errors.email}\r\n            helperText={\r\n              errors.email ? (\r\n                <span style={{ color: 'red', marginLeft: '-12px' }}>\r\n                  {errors.email}\r\n                </span>\r\n              ) : null\r\n            }\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"dense\"\r\n            required\r\n            fullWidth\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={({ target }) =>\r\n              setValues({ ...values, password: target.value })\r\n            }\r\n            error={!!errors.password}\r\n            helperText={\r\n              errors.password ? (\r\n                <span style={{ color: 'red', marginLeft: '-12px' }}>\r\n                  {errors.password}\r\n                </span>\r\n              ) : null\r\n            }\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"dense\"\r\n            required\r\n            fullWidth\r\n            label=\"Confirm Password\"\r\n            type=\"password\"\r\n            value={confirmPassword}\r\n            onChange={({ target }) =>\r\n              setValues({ ...values, confirmPassword: target.value })\r\n            }\r\n            error={!!errors.confirmPassword}\r\n            helperText={\r\n              errors.confirmPassword ? (\r\n                <span style={{ color: 'red', marginLeft: '-12px' }}>\r\n                  {errors.confirmPassword}\r\n                </span>\r\n              ) : null\r\n            }\r\n          />\r\n          <div className={classes.submit}>\r\n            <Button\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              className={classes.submitButton}\r\n            >\r\n              {submitting && (\r\n                <CircularProgress\r\n                  size={20}\r\n                  style={{\r\n                    position: 'absolute',\r\n                    left: 20,\r\n                    alignSelf: 'center',\r\n                    color: 'white'\r\n                  }}\r\n                />\r\n              )}\r\n              Create Account\r\n            </Button>\r\n            <Button fullWidth onClick={toggleDrawer}>\r\n              Cancel\r\n            </Button>\r\n          </div>\r\n          <Grid container justify=\"center\">\r\n            <Grid item>\r\n              <Link\r\n                onClick={() => setShowSignInForm(true)}\r\n                variant=\"body2\"\r\n                style={{ cursor: 'pointer' }}\r\n              >\r\n                Already have an account? Sign in\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n    </Container>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Button, Drawer, Grid } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport SignInForm from '../sign-in-form/SignInForm';\r\nimport RegisterForm from '../register-form/RegisterForm';\r\n\r\nconst useStyles = makeStyles({\r\n  drawer: {\r\n    flex: 1,\r\n    width: 300,\r\n    marginTop: '8px',\r\n    marginBottom: '12px'\r\n  },\r\n  authButton: {\r\n    color: 'white',\r\n    background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)'\r\n  }\r\n});\r\n\r\nexport default function AuthModal() {\r\n  const classes = useStyles();\r\n\r\n  const [modalOpen, setModalOpen] = React.useState(false);\r\n  const [showSignInForm, setShowSignInForm] = React.useState(true);\r\n\r\n  const toggleDrawer = () => setModalOpen(prev => !prev);\r\n\r\n  const renderContent = () => {\r\n    return (\r\n      <Grid\r\n        container\r\n        direction=\"column\"\r\n        justify=\"center\"\r\n        alignItems=\"center\"\r\n        className={classes.drawer}\r\n      >\r\n        {showSignInForm ? (\r\n          <SignInForm\r\n            toggleDrawer={toggleDrawer}\r\n            setShowSignInForm={value => setShowSignInForm(value)}\r\n          />\r\n        ) : (\r\n          <RegisterForm\r\n            toggleDrawer={toggleDrawer}\r\n            setShowSignInForm={value => setShowSignInForm(value)}\r\n          />\r\n        )}\r\n      </Grid>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        color=\"primary\"\r\n        className={classes.authButton}\r\n        variant=\"contained\"\r\n        onClick={toggleDrawer}\r\n      >\r\n        Sign In\r\n      </Button>\r\n      <Drawer anchor=\"right\" open={modalOpen} onClose={toggleDrawer}>\r\n        {renderContent()}\r\n      </Drawer>\r\n    </>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { AppBar, Toolbar, Button } from '@material-ui/core';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport logo from '../../assets/img/logo.png';\r\nimport { FirebaseContext, auth } from '../../firebase';\r\n\r\nimport AuthModal from '../auth-modal/AuthModal';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  grow: {\r\n    flexGrow: 1\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2)\r\n  },\r\n  title: {\r\n    display: 'none',\r\n    [theme.breakpoints.up('sm')]: {\r\n      display: 'block'\r\n    }\r\n  },\r\n  sectionDesktop: {\r\n    display: 'none',\r\n    [theme.breakpoints.up('md')]: {\r\n      display: 'flex'\r\n    }\r\n  },\r\n  sectionMobile: {\r\n    display: 'flex',\r\n    [theme.breakpoints.up('md')]: {\r\n      display: 'none'\r\n    }\r\n  },\r\n  offset: theme.mixins.toolbar,\r\n  toolbar: { backgroundColor: 'white', color: 'black' },\r\n  imageDiv: { marginRight: '10px', height: '32px' },\r\n  image: { height: '32px' },\r\n  authButton: {\r\n    color: 'white',\r\n    background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)'\r\n  }\r\n}));\r\n\r\nconst Header = () => {\r\n  const { currentUser } = React.useContext(FirebaseContext);\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.grow}>\r\n      <AppBar position=\"fixed\">\r\n        <Toolbar className={classes.toolbar}>\r\n          <Button component={Link} to=\"/\">\r\n            <div className={classes.imageDiv}>\r\n              <img src={logo} alt=\"Essence\" className={classes.image} />\r\n            </div>\r\n          </Button>\r\n          <div className={classes.grow} />\r\n\r\n          {currentUser ? (\r\n            <Button\r\n              className={classes.authButton}\r\n              variant=\"contained\"\r\n              onClick={() => auth.signOut()}\r\n            >\r\n              Sign Out\r\n            </Button>\r\n          ) : (\r\n            <AuthModal />\r\n          )}\r\n        </Toolbar>\r\n      </AppBar>\r\n      <div className={classes.offset} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport { Typography, Container, Link } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport { Link as RouterLink } from 'react-router-dom';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    minHeight: '18vh'\r\n  },\r\n  main: {\r\n    marginTop: theme.spacing(8),\r\n    marginBottom: theme.spacing(2)\r\n  },\r\n  footer: {\r\n    padding: theme.spacing(3, 2),\r\n    marginTop: 'auto',\r\n    background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)',\r\n    color: 'white'\r\n  }\r\n}));\r\n\r\nconst Copyright = () => {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"inherit\">\r\n      {'Copyright © '}\r\n      <Link component={RouterLink} color=\"inherit\" to=\"/\">\r\n        Essence Hair Salon\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n};\r\n\r\nconst Footer = () => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <footer className={classes.footer}>\r\n        <Container maxWidth=\"sm\">\r\n          <Copyright />\r\n        </Container>\r\n      </footer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","const serviceList = [\r\n  { id: 0, name: 'Haircut (Men)', category: 'A', price: 150, duration: 15 },\r\n  { id: 1, name: 'Haircut (Woman)', category: 'B', price: 250, duration: 45 },\r\n  { id: 2, name: 'Hair treatment', category: 'C', price: 350, duration: 75 },\r\n  { id: 3, name: 'Eyebrows', category: 'A', price: 150, duration: 15 },\r\n  { id: 4, name: 'Hair coloring', category: 'B', price: 250, duration: 45 },\r\n  { id: 5, name: 'Bleach bath', category: 'C', price: 350, duration: 75 },\r\n  { id: 6, name: 'Manicure', category: 'A', price: 150, duration: 15 },\r\n  {\r\n    id: 7,\r\n    name: 'Shampoo & blow dry',\r\n    category: 'B',\r\n    price: 250,\r\n    duration: 75\r\n  },\r\n  { id: 8, name: 'Perm', category: 'C', price: 350, duration: 75 }\r\n];\r\n\r\nexport default serviceList;\r\n","import React from 'react';\r\nimport {\r\n  Avatar,\r\n  Button,\r\n  CssBaseline,\r\n  TextField,\r\n  Grid,\r\n  Typography,\r\n  Container,\r\n  CircularProgress,\r\n  FormHelperText,\r\n  Link\r\n} from '@material-ui/core';\r\nimport ConfirmationNumberIcon from '@material-ui/icons/ConfirmationNumber';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { createTicketDocument } from '../../firebase';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  paper: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center'\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)'\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(3)\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2)\r\n  },\r\n  submitButton: {\r\n    color: 'white',\r\n    marginBottom: theme.spacing(1),\r\n    background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)'\r\n  }\r\n}));\r\n\r\nconst INITIAL_VALUES = {\r\n  firstName: '',\r\n  lastName: '',\r\n  telephone: '',\r\n  email: ''\r\n};\r\n\r\nconst CreateTicketForm = ({\r\n  toggleDrawer,\r\n  currentUser,\r\n  category,\r\n  setShowTicketControls\r\n}) => {\r\n  const classes = useStyles();\r\n\r\n  const [values, setValues] = React.useState(INITIAL_VALUES);\r\n  const [errors, setErrors] = React.useState({});\r\n  const [submitting, setSubmitting] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    if (currentUser && !currentUser.isAdmin) {\r\n      const { displayName, telephone, email } = currentUser;\r\n      const names = displayName.split(' ');\r\n      const firstName = names[0],\r\n        lastName = names[1];\r\n      setValues({\r\n        firstName,\r\n        lastName,\r\n        telephone,\r\n        email\r\n      });\r\n    }\r\n  }, [currentUser]);\r\n\r\n  const { firstName, lastName, telephone, email } = values;\r\n\r\n  const handleSubmit = async event => {\r\n    event.preventDefault();\r\n\r\n    // Validation\r\n    if (!firstName) {\r\n      return setErrors({ firstName: 'First name is required' });\r\n    } else if (!lastName) {\r\n      return setErrors({\r\n        lastName: 'Last name is required'\r\n      });\r\n    } else if (!telephone) {\r\n      return setErrors({\r\n        telephone: 'Please enter a telephone number'\r\n      });\r\n    } else if (\r\n      email &&\r\n      !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(email)\r\n    ) {\r\n      return setErrors({ email: 'Email is invalid' });\r\n    }\r\n\r\n    setSubmitting(true);\r\n    setErrors({});\r\n\r\n    const formattedFirstName = firstName.trim(),\r\n      formattedLastName = lastName.trim();\r\n\r\n    const customerName =\r\n      formattedFirstName.charAt(0).toUpperCase() +\r\n      formattedFirstName.substring(1) +\r\n      ' ' +\r\n      formattedLastName.charAt(0).toUpperCase() +\r\n      formattedLastName.substring(1);\r\n\r\n    try {\r\n      const ticketData = {\r\n        customerName,\r\n        category,\r\n        telephone,\r\n        email: email ? email : null,\r\n        currentUser: currentUser ? currentUser : null\r\n      };\r\n\r\n      await createTicketDocument(ticketData);\r\n\r\n      return toggleDrawer();\r\n    } catch (error) {\r\n      console.log(error.message);\r\n      setSubmitting(false);\r\n      return setErrors({\r\n        general: error.message\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <ConfirmationNumberIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Create ticket\r\n        </Typography>\r\n        <small>Catergory - {category}</small>\r\n        <small>Enter your details</small>\r\n        <form onSubmit={handleSubmit} className={classes.form} noValidate>\r\n          <Grid container spacing={1}>\r\n            <Grid item xs={6}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                margin=\"dense\"\r\n                required\r\n                fullWidth\r\n                type=\"text\"\r\n                label=\"First Name\"\r\n                autoFocus\r\n                value={firstName}\r\n                onChange={({ target }) =>\r\n                  setValues({ ...values, firstName: target.value })\r\n                }\r\n                error={!!errors.firstName}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                margin=\"dense\"\r\n                required\r\n                fullWidth\r\n                type=\"text\"\r\n                label=\"Last Name\"\r\n                value={lastName}\r\n                onChange={({ target }) =>\r\n                  setValues({ ...values, lastName: target.value })\r\n                }\r\n                error={!!errors.lastName}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n          <FormHelperText\r\n            style={{\r\n              marginLeft: '2px',\r\n              marginTop: '-2px',\r\n              marginBottom: '4px',\r\n              color: 'red'\r\n            }}\r\n          >\r\n            {errors.firstName && errors.firstName}\r\n            {errors.lastName && errors.lastName}\r\n          </FormHelperText>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"dense\"\r\n            required\r\n            fullWidth\r\n            type=\"tel\"\r\n            label=\"Telephone\"\r\n            value={telephone}\r\n            onChange={({ target }) =>\r\n              setValues({ ...values, telephone: target.value })\r\n            }\r\n            error={!!errors.telephone}\r\n            helperText={\r\n              errors.telephone ? (\r\n                <span style={{ color: 'red', marginLeft: '-12px' }}>\r\n                  {errors.telephone}\r\n                </span>\r\n              ) : null\r\n            }\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"dense\"\r\n            fullWidth\r\n            type=\"email\"\r\n            label=\"Email\"\r\n            value={email}\r\n            onChange={({ target }) =>\r\n              setValues({ ...values, email: target.value })\r\n            }\r\n            error={!!errors.email}\r\n            helperText={\r\n              errors.email ? (\r\n                <span style={{ color: 'red', marginLeft: '-12px' }}>\r\n                  {errors.email}\r\n                </span>\r\n              ) : null\r\n            }\r\n          />\r\n          <div className={classes.submit}>\r\n            <Button\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              className={classes.submitButton}\r\n            >\r\n              {submitting && (\r\n                <CircularProgress\r\n                  size={20}\r\n                  style={{\r\n                    position: 'absolute',\r\n                    left: 20,\r\n                    alignSelf: 'center',\r\n                    color: 'white'\r\n                  }}\r\n                />\r\n              )}\r\n              Create Ticket\r\n            </Button>\r\n            <Button fullWidth onClick={toggleDrawer}>\r\n              Cancel\r\n            </Button>\r\n          </div>\r\n          {setShowTicketControls && (\r\n            <Grid container justify=\"center\">\r\n              <Grid item>\r\n                <Link\r\n                  onClick={() => setShowTicketControls(true)}\r\n                  variant=\"body2\"\r\n                  style={{ cursor: 'pointer' }}\r\n                >\r\n                  Go to control panel\r\n                </Link>\r\n              </Grid>\r\n            </Grid>\r\n          )}\r\n        </form>\r\n      </div>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default CreateTicketForm;\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Box, Popover, Typography, Button, Chip } from '@material-ui/core';\r\nimport { format } from 'date-fns';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  typography: {\r\n    padding: theme.spacing(2)\r\n  }\r\n}));\r\n\r\nconst TicketPopover = ({ ticket, showStatusChip }) => {\r\n  const classes = useStyles();\r\n\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n  const handleClick = event => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const open = Boolean(anchorEl);\r\n  const id = open ? 'simple-popover' : undefined;\r\n\r\n  let buttonBackground;\r\n\r\n  switch (ticket.category) {\r\n    case 'A':\r\n      buttonBackground = {\r\n        background: 'linear-gradient(45deg, #e65c00 30%, #f9d423 90%)'\r\n      };\r\n      break;\r\n    case 'B':\r\n      buttonBackground = {\r\n        background: 'linear-gradient(45deg, #5433ff 30%, #20bdff 90%)'\r\n      };\r\n      break;\r\n    case 'C':\r\n      buttonBackground = {\r\n        background: 'linear-gradient(45deg, #cc2b5e 30%, #753a88 90%)'\r\n      };\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        aria-describedby={id}\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        style={{\r\n          padding: '6px 12px',\r\n          margin: '2px',\r\n          opacity: ticket.closed ? '55%' : '85%',\r\n          ...buttonBackground\r\n        }}\r\n        onClick={handleClick}\r\n      >\r\n        {ticket.id}\r\n        {ticket.current && showStatusChip && (\r\n          <Chip\r\n            style={{\r\n              background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)',\r\n              position: 'absolute',\r\n              alignSelf: 'center',\r\n              right: 72\r\n            }}\r\n            label=\"In Progress\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n          />\r\n        )}\r\n        {ticket.closed && showStatusChip && (\r\n          <Chip\r\n            style={{\r\n              position: 'absolute',\r\n              alignSelf: 'center',\r\n              right: 72\r\n            }}\r\n            label=\"Closed\"\r\n            color=\"primary\"\r\n            size=\"small\"\r\n          />\r\n        )}\r\n      </Button>\r\n      <Popover\r\n        id={id}\r\n        open={open}\r\n        anchorEl={anchorEl}\r\n        onClose={handleClose}\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'center'\r\n        }}\r\n        transformOrigin={{\r\n          vertical: 'top',\r\n          horizontal: 'center'\r\n        }}\r\n      >\r\n        <Typography className={classes.typography} component=\"div\">\r\n          <Box fontWeight=\"fontWeightRegular\" letterSpacing={2} fontSize={14}>\r\n            Status:{' '}\r\n            <strong>\r\n              {ticket.closed && 'Closed'}\r\n              {ticket.current && 'In Progress'}\r\n              {!ticket.closed && !ticket.current && 'Upcoming'}\r\n            </strong>\r\n            <br />\r\n            Ticket no. <strong>{ticket.id}</strong>\r\n            <br />\r\n            Customer: <strong>{ticket.customerName}</strong>\r\n            <br />\r\n            Telephone: <strong>{ticket.telephone}</strong>\r\n            <br />\r\n            Email: {ticket.email ? <strong>{ticket.email}</strong> : '-'}\r\n            <br />\r\n            Created at{' '}\r\n            <strong>{format(ticket.createdAt.toDate(), 'HH:mm')} today</strong>\r\n            <br />\r\n            {ticket.closed && 'Closed at '}\r\n            {ticket.closed && (\r\n              <strong>{format(ticket.closedAt.toDate(), 'HH:mm')} today</strong>\r\n            )}\r\n          </Box>\r\n        </Typography>\r\n      </Popover>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TicketPopover;\r\n","import React from 'react';\r\nimport {\r\n  Divider,\r\n  Typography,\r\n  Box,\r\n  Grid,\r\n  Link,\r\n  Avatar,\r\n  Button,\r\n  CircularProgress\r\n} from '@material-ui/core';\r\nimport ConfirmationNumberIcon from '@material-ui/icons/ConfirmationNumber';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport TicketPopover from '../ticket-popover/TicketPopover';\r\n\r\nimport {\r\n  FirebaseContext,\r\n  closeCurrentTicket,\r\n  startNextTicket\r\n} from '../../firebase';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  submit: {\r\n    margin: theme.spacing(3, 2, 2)\r\n  },\r\n  submitButton: {\r\n    color: 'white',\r\n    marginBottom: theme.spacing(1),\r\n    background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)'\r\n  }\r\n}));\r\n\r\nconst TicketControlPanel = ({\r\n  setShowTicketControls,\r\n  category,\r\n  toggleDrawer\r\n}) => {\r\n  const { ticketCollection } = React.useContext(FirebaseContext);\r\n\r\n  const classes = useStyles();\r\n\r\n  const [submitting, setSubmitting] = React.useState(false);\r\n\r\n  if (!ticketCollection) {\r\n    setShowTicketControls(false);\r\n    return null;\r\n  }\r\n\r\n  const { tickets } = ticketCollection;\r\n\r\n  const categoryTickets = tickets.filter(\r\n    ticket => ticket.category === category\r\n  );\r\n\r\n  const openTickets = categoryTickets.filter(ticket => !ticket.closed);\r\n\r\n  const renderHeading = () => {\r\n    return (\r\n      <Grid\r\n        item\r\n        style={{\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          justifyContent: 'center',\r\n          alignItems: 'center'\r\n        }}\r\n      >\r\n        <Avatar\r\n          style={{\r\n            background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)'\r\n          }}\r\n        >\r\n          <ConfirmationNumberIcon />\r\n        </Avatar>\r\n        <Typography align=\"center\" component=\"div\">\r\n          <Box\r\n            fontWeight=\"fontWeightRegular\"\r\n            fontSize={24}\r\n            letterSpacing={1}\r\n            m={2}\r\n          >\r\n            Admin Control Panel\r\n          </Box>\r\n          <Box fontWeight=\"fontWeightRegular\" fontSize={20} letterSpacing={1}>\r\n            Category {category}\r\n          </Box>\r\n        </Typography>\r\n      </Grid>\r\n    );\r\n  };\r\n\r\n  const renderSummary = () => {\r\n    if (categoryTickets.length === 0) {\r\n      return (\r\n        <Box\r\n          fontWeight=\"fontWeightRegular\"\r\n          fontSize={14}\r\n          letterSpacing={1}\r\n          m={2}\r\n        >\r\n          There are 0 tickets under this category\r\n        </Box>\r\n      );\r\n    }\r\n    return (\r\n      <Box fontWeight=\"fontWeightRegular\" fontSize={14} letterSpacing={1} m={2}>\r\n        Total tickets: {categoryTickets.length}\r\n        <br />\r\n        Open tickets: {openTickets.length}\r\n        <br />\r\n        Closed tickets: {categoryTickets.length - openTickets.length}\r\n        <br />\r\n      </Box>\r\n    );\r\n  };\r\n\r\n  const renderTickets = () => {\r\n    return categoryTickets\r\n      .reverse()\r\n      .map(ticket => (\r\n        <TicketPopover key={ticket.id} ticket={ticket} showStatusChip />\r\n      ));\r\n  };\r\n\r\n  const renderActions = () => {\r\n    const currentTicket = openTickets.find(ticket => ticket.current);\r\n\r\n    const noMoreTickets = openTickets.length === 0;\r\n\r\n    const nextTicket = !noMoreTickets\r\n      ? openTickets[openTickets.length - 1]\r\n      : null;\r\n\r\n    let categoryObject =\r\n      category === 'A'\r\n        ? ticketCollection.categoryA\r\n        : category === 'B'\r\n        ? ticketCollection.categoryB\r\n        : ticketCollection.categoryC;\r\n\r\n    return (\r\n      <div className={classes.submit}>\r\n        <Box\r\n          fontWeight=\"fontWeightRegular\"\r\n          fontSize={14}\r\n          letterSpacing={1}\r\n          m={2}\r\n        >\r\n          {currentTicket && `Current ticket: ${currentTicket.id}`}\r\n        </Box>\r\n        {currentTicket ? (\r\n          <Button\r\n            fullWidth\r\n            variant=\"contained\"\r\n            className={classes.submitButton}\r\n            onClick={async () => {\r\n              setSubmitting(true);\r\n              await closeCurrentTicket(currentTicket, tickets);\r\n              return setSubmitting(false);\r\n            }}\r\n          >\r\n            {submitting && (\r\n              <CircularProgress\r\n                size={20}\r\n                style={{\r\n                  position: 'absolute',\r\n                  left: 20,\r\n                  alignSelf: 'center',\r\n                  color: 'white'\r\n                }}\r\n              />\r\n            )}\r\n            Complete Ticket\r\n          </Button>\r\n        ) : (\r\n          <Button\r\n            fullWidth\r\n            variant=\"contained\"\r\n            className={classes.submitButton}\r\n            onClick={async () => {\r\n              setSubmitting(true);\r\n              await startNextTicket(nextTicket, tickets, categoryObject);\r\n              return setSubmitting(false);\r\n            }}\r\n            disabled={noMoreTickets}\r\n          >\r\n            {submitting && (\r\n              <CircularProgress\r\n                size={20}\r\n                style={{\r\n                  position: 'absolute',\r\n                  left: 20,\r\n                  alignSelf: 'center',\r\n                  color: 'white'\r\n                }}\r\n              />\r\n            )}\r\n            Start Next Ticket\r\n          </Button>\r\n        )}\r\n        <Button fullWidth onClick={toggleDrawer}>\r\n          Cancel\r\n        </Button>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Grid container justify=\"center\">\r\n      <Typography align=\"center\" component=\"div\">\r\n        {renderHeading()}\r\n        {renderSummary()}\r\n        {renderTickets()}\r\n        <div style={{ margin: '20px 12px' }}>\r\n          <Divider />\r\n        </div>\r\n        {renderActions()}\r\n      </Typography>\r\n      <Grid item>\r\n        <Grid item>\r\n          <Link\r\n            onClick={() => setShowTicketControls(false)}\r\n            variant=\"body2\"\r\n            style={{ cursor: 'pointer' }}\r\n          >\r\n            Create a ticket for a customer\r\n          </Link>\r\n        </Grid>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default TicketControlPanel;\r\n","import React from 'react';\r\nimport { Button, Drawer, Typography, Grid, Box } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport { FirebaseContext } from '../../firebase';\r\nimport CreateTicketForm from '../create-ticket-form/CreateTicketForm';\r\nimport TicketControlPanel from '../ticket-control-panel/TicketControlPanel';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  drawer: {\r\n    flex: 1,\r\n    width: 300,\r\n    paddingTop: '24px',\r\n    paddingBottom: '24px'\r\n  },\r\n  ticketButton: {\r\n    display: 'flex',\r\n    height: theme.spacing(24),\r\n    opacity: '75%'\r\n  }\r\n}));\r\n\r\nconst TicketActionsModal = ({ category }) => {\r\n  const { currentUser, ticketCollection } = React.useContext(FirebaseContext);\r\n\r\n  const classes = useStyles();\r\n\r\n  const [modalOpen, setModalOpen] = React.useState(false);\r\n  const [showTicketControls, setShowTicketControls] = React.useState(true);\r\n\r\n  let buttonBackground;\r\n\r\n  if (category === 'A') {\r\n    buttonBackground = {\r\n      background: 'linear-gradient(45deg, #e65c00 30%, #f9d423 90%)'\r\n    };\r\n  } else if (category === 'B') {\r\n    buttonBackground = {\r\n      background: 'linear-gradient(45deg, #5433ff 30%, #20bdff 90%)'\r\n    };\r\n  } else {\r\n    buttonBackground = {\r\n      background: 'linear-gradient(45deg, #cc2b5e 30%, #753a88 90%)'\r\n    };\r\n  }\r\n\r\n  const toggleDrawer = () => {\r\n    if (currentUser && currentUser.isAdmin) setShowTicketControls(true);\r\n    return setModalOpen(prev => !prev);\r\n  };\r\n\r\n  const renderContent = () => {\r\n    let drawerContent;\r\n    if (!currentUser) {\r\n      drawerContent = (\r\n        <CreateTicketForm\r\n          toggleDrawer={toggleDrawer}\r\n          currentUser={currentUser}\r\n          category={category}\r\n        />\r\n      );\r\n    } else {\r\n      if (currentUser.isAdmin) {\r\n        drawerContent = showTicketControls ? (\r\n          <TicketControlPanel\r\n            category={category}\r\n            setShowTicketControls={setShowTicketControls}\r\n            toggleDrawer={toggleDrawer}\r\n          />\r\n        ) : (\r\n          <CreateTicketForm\r\n            toggleDrawer={toggleDrawer}\r\n            category={category}\r\n            currentUser={currentUser}\r\n            setShowTicketControls={setShowTicketControls}\r\n          />\r\n        );\r\n      } else {\r\n        drawerContent = (\r\n          <CreateTicketForm\r\n            toggleDrawer={toggleDrawer}\r\n            currentUser={currentUser}\r\n            category={category}\r\n          />\r\n        );\r\n      }\r\n    }\r\n\r\n    return (\r\n      <Grid\r\n        container\r\n        direction=\"column\"\r\n        justify=\"center\"\r\n        alignItems=\"center\"\r\n        className={classes.drawer}\r\n      >\r\n        {drawerContent}\r\n      </Grid>\r\n    );\r\n  };\r\n\r\n  const renderOpenModalButton = () => {\r\n    // When user is not authenticated\r\n    if (!currentUser) {\r\n      return (\r\n        <Button\r\n          fullWidth\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          className={classes.ticketButton}\r\n          style={buttonBackground}\r\n          onClick={() => {}}\r\n        >\r\n          {renderOpenModalButtonLabel()}\r\n        </Button>\r\n      );\r\n    }\r\n\r\n    if (!ticketCollection) {\r\n      return (\r\n        <Button\r\n          fullWidth\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          className={classes.ticketButton}\r\n          style={buttonBackground}\r\n          onClick={toggleDrawer}\r\n        >\r\n          {renderOpenModalButtonLabel()}\r\n        </Button>\r\n      );\r\n    }\r\n\r\n    // If user is logged in, check how many tickets are booked\r\n    // If user has reached max tickets, disable buttons\r\n    const { tickets } = ticketCollection;\r\n\r\n    const openUserTickets = tickets.filter(\r\n      ticket =>\r\n        ticket.createdBy.id &&\r\n        ticket.createdBy.id === currentUser.id &&\r\n        !ticket.closed\r\n    );\r\n\r\n    const maxTicketsReached = openUserTickets.length >= 3;\r\n\r\n    return (\r\n      <Button\r\n        fullWidth\r\n        color=\"primary\"\r\n        variant=\"contained\"\r\n        className={classes.ticketButton}\r\n        style={\r\n          !currentUser.isAdmin && maxTicketsReached\r\n            ? { ...buttonBackground, opacity: '55%' }\r\n            : buttonBackground\r\n        }\r\n        onClick={\r\n          !currentUser.isAdmin && maxTicketsReached ? () => {} : toggleDrawer\r\n        }\r\n      >\r\n        {renderOpenModalButtonLabel()}\r\n      </Button>\r\n    );\r\n  };\r\n\r\n  const renderOpenModalButtonLabel = () => {\r\n    // When tickets are still loading\r\n    if (!ticketCollection) {\r\n      return (\r\n        <Typography component=\"div\">\r\n          <Box letterSpacing={3} fontWeight=\"fontWeightRegular\" fontSize={96}>\r\n            +\r\n          </Box>\r\n        </Typography>\r\n      );\r\n    }\r\n\r\n    const { categoryA, categoryB, categoryC } = ticketCollection;\r\n\r\n    let buttonLabel;\r\n\r\n    if (category === 'A') {\r\n      if (categoryA.current === 0) buttonLabel = '+';\r\n      else buttonLabel = `A${categoryA.current}`;\r\n    } else if (category === 'B') {\r\n      if (categoryB.current === 0) buttonLabel = '+';\r\n      else buttonLabel = `B${categoryB.current}`;\r\n    } else {\r\n      if (categoryC.current === 0) buttonLabel = '+';\r\n      else buttonLabel = `C${categoryC.current}`;\r\n    }\r\n\r\n    return (\r\n      <Typography component=\"div\">\r\n        <Box letterSpacing={3} fontWeight=\"fontWeightRegular\" fontSize={96}>\r\n          {buttonLabel}\r\n        </Box>\r\n      </Typography>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {renderOpenModalButton()}\r\n      <Drawer anchor=\"left\" open={modalOpen} onClose={toggleDrawer}>\r\n        {renderContent()}\r\n      </Drawer>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default TicketActionsModal;\r\n","import React from 'react';\r\nimport {\r\n  Container,\r\n  Typography,\r\n  Grid,\r\n  Box,\r\n  Divider,\r\n  Paper\r\n} from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { format } from 'date-fns';\r\n\r\nimport { FirebaseContext } from '../../firebase';\r\nimport serviceList from '../../service-list/serviceList';\r\n\r\nimport TicketActionsModal from '../../components/ticket-actions-modal/TicketActionsModal';\r\nimport TicketPopover from '../../components/ticket-popover/TicketPopover';\r\n\r\nconst serviceListA = serviceList.filter(({ category }) => category === 'A');\r\nconst serviceListB = serviceList.filter(({ category }) => category === 'B');\r\nconst serviceListC = serviceList.filter(({ category }) => category === 'C');\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  tickets: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    justifyContent: 'space-around',\r\n    marginTop: '12px',\r\n    '& > *': {\r\n      margin: theme.spacing(1),\r\n      width: theme.spacing(36)\r\n    }\r\n  },\r\n  ticketGrid: {\r\n    padding: 0\r\n  }\r\n}));\r\n\r\n// COMPONENT\r\nconst HomePage = () => {\r\n  const { currentUser, ticketCollection } = React.useContext(FirebaseContext);\r\n\r\n  const classes = useStyles();\r\n\r\n  const renderHeading = () => (\r\n    <Grid\r\n      container\r\n      direction=\"row\"\r\n      justify=\"center\"\r\n      style={{ paddingBottom: '24px' }}\r\n    >\r\n      <Grid item xs={12} md={8}>\r\n        <Typography align=\"left\" component=\"div\">\r\n          {renderDate()}\r\n          {renderGreeting()}\r\n        </Typography>\r\n        <Typography variant=\"h6\" align=\"left\">\r\n          {!currentUser && (\r\n            <Box fontWeight=\"fontWeightRegular\" letterSpacing={2} fontSize={14}>\r\n              Sign in or create an account to create ticket.\r\n              <br />\r\n              Alternatively, give us a call and our team will create a ticket\r\n              for you on your behalf.\r\n              <br />\r\n              We also accept walk-ins.\r\n            </Box>\r\n          )}\r\n          <div style={{ margin: '8px 0', paddingRight: '24px' }}>\r\n            <Divider />\r\n          </div>\r\n          <Box fontWeight=\"fontWeightRegular\" letterSpacing={2} fontSize={14}>\r\n            Get started by selecting one of the three ticket categories below.\r\n            <br />\r\n            Each ticket category covers a different set of services.\r\n          </Box>\r\n        </Typography>\r\n      </Grid>\r\n      <Grid\r\n        item\r\n        xs={12}\r\n        md={4}\r\n        style={{\r\n          marginTop: '24px'\r\n        }}\r\n      >\r\n        {currentUser && (\r\n          <Paper\r\n            elevation={3}\r\n            style={{\r\n              display: 'flex',\r\n              flex: 1,\r\n              height: '100%',\r\n              justifyContent: 'center',\r\n              alignItems: 'center'\r\n            }}\r\n          >\r\n            {!ticketCollection && (\r\n              <Typography align=\"center\" component=\"div\">\r\n                <Box\r\n                  fontWeight=\"fontWeightRegular\"\r\n                  letterSpacing={2}\r\n                  fontSize={20}\r\n                >\r\n                  View upcoming tickets here\r\n                </Box>\r\n              </Typography>\r\n            )}\r\n            {ticketCollection && renderUpcomingTickets()}\r\n          </Paper>\r\n        )}\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n\r\n  const renderDate = () => (\r\n    <Box fontWeight=\"fontWeightRegular\" letterSpacing={6} fontSize={24}>\r\n      {format(new Date(), 'do MMMM yyyy')}\r\n    </Box>\r\n  );\r\n\r\n  const renderGreeting = () => {\r\n    const currentHour = Number(format(new Date(), 'H'));\r\n    let greetingMessage = '';\r\n\r\n    if (currentHour >= 2 && currentHour < 12) greetingMessage = 'Good Morning';\r\n    else if (currentHour >= 12 && currentHour < 6)\r\n      greetingMessage = 'Good Afternoon';\r\n    else greetingMessage = 'Good Evening';\r\n\r\n    if (currentUser) {\r\n      const name = currentUser.displayName\r\n        ? currentUser.displayName.split(' ')[0]\r\n        : null;\r\n      return (\r\n        <Box fontWeight=\"fontWeightLight\" letterSpacing={3} fontSize={48}>\r\n          {greetingMessage + ', ' + name}\r\n        </Box>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <Box fontWeight=\"fontWeightLight\" letterSpacing={3} fontSize={48}>\r\n        {greetingMessage}\r\n      </Box>\r\n    );\r\n  };\r\n\r\n  const renderUpcomingTickets = () => {\r\n    const { tickets } = ticketCollection;\r\n\r\n    const openUserTickets = tickets.filter(\r\n      ticket =>\r\n        ticket.createdBy.id &&\r\n        ticket.createdBy.id === currentUser.id &&\r\n        !ticket.closed\r\n    );\r\n\r\n    const userTicketButtons = openUserTickets.map(ticket => (\r\n      <TicketPopover key={ticket.id} ticket={ticket} />\r\n    ));\r\n\r\n    return (\r\n      <Typography align=\"center\" component=\"div\">\r\n        <Box\r\n          fontWeight=\"fontWeightRegular\"\r\n          letterSpacing={2}\r\n          fontSize={20}\r\n          mt={2}\r\n        >\r\n          {openUserTickets.length === 0\r\n            ? 'View upcoming tickets here'\r\n            : 'Upcoming tickets'}\r\n        </Box>\r\n        <Grid\r\n          container\r\n          style={{\r\n            display: 'flex',\r\n            marginTop: '12px',\r\n            marginBottom: '20px',\r\n            paddingLeft: '8px',\r\n            paddingRight: '8px',\r\n            justifyContent: 'center',\r\n            alignContent: 'flex-start'\r\n          }}\r\n        >\r\n          {userTicketButtons}\r\n        </Grid>\r\n        {!currentUser.isAdmin && openUserTickets.length >= 3 && (\r\n          <Box\r\n            fontWeight=\"fontWeightRegular\"\r\n            letterSpacing={2}\r\n            fontSize={14}\r\n            pb={1}\r\n            px={4}\r\n          >\r\n            You have reached a maximum of 3 tickets\r\n          </Box>\r\n        )}\r\n      </Typography>\r\n    );\r\n  };\r\n\r\n  const renderTickets = () => (\r\n    <>\r\n      <Grid>\r\n        <Typography variant=\"h6\">\r\n          <Box fontWeight=\"fontWeightLight\" letterSpacing={2} fontSize={32}>\r\n            - Currently Serving -\r\n          </Box>\r\n        </Typography>\r\n      </Grid>\r\n      <Grid container className={classes.tickets}>\r\n        {/* Ticket A */}\r\n        <Grid\r\n          display=\"flex\"\r\n          flexdirection=\"column\"\r\n          className={classes.ticketGrid}\r\n        >\r\n          <TicketActionsModal category=\"A\" />\r\n          <Typography\r\n            align=\"left\"\r\n            component=\"div\"\r\n            style={{\r\n              padding: '12px 4px',\r\n              marginBottom: '12px'\r\n            }}\r\n          >\r\n            <Box fontWeight=\"fontWeightRegular\" letterSpacing={1} fontSize={16}>\r\n              Services include:\r\n            </Box>\r\n            <Box\r\n              fontWeight=\"fontWeightRegular\"\r\n              letterSpacing={1}\r\n              fontSize={14}\r\n              style={{ paddingLeft: '8px', paddingRight: '8px' }}\r\n            >\r\n              {serviceListA.map(service => (\r\n                <div key={service.id}>\r\n                  <p style={{ marginBottom: '2px' }}>\r\n                    {service.name} - {service.price}sr ~ {service.duration} mins\r\n                  </p>\r\n                  <Divider />\r\n                </div>\r\n              ))}\r\n            </Box>\r\n          </Typography>\r\n        </Grid>\r\n\r\n        {/* Ticket B */}\r\n        <Grid\r\n          display=\"flex\"\r\n          flexdirection=\"column\"\r\n          className={classes.ticketGrid}\r\n        >\r\n          <TicketActionsModal category=\"B\" />\r\n          <Typography\r\n            align=\"left\"\r\n            component=\"div\"\r\n            style={{\r\n              padding: '12px 4px',\r\n              marginBottom: '12px'\r\n            }}\r\n          >\r\n            <Box fontWeight=\"fontWeightRegular\" letterSpacing={1} fontSize={16}>\r\n              Services include:\r\n            </Box>\r\n            <Box\r\n              fontWeight=\"fontWeightRegular\"\r\n              letterSpacing={1}\r\n              fontSize={14}\r\n              style={{ paddingLeft: '8px', paddingRight: '8px' }}\r\n            >\r\n              {serviceListB.map(service => (\r\n                <div key={service.id}>\r\n                  <p style={{ marginBottom: '2px' }}>\r\n                    {service.name} - {service.price}sr ~ {service.duration} mins\r\n                  </p>\r\n                  <Divider />\r\n                </div>\r\n              ))}\r\n            </Box>\r\n          </Typography>\r\n        </Grid>\r\n\r\n        {/* Ticket C */}\r\n        <Grid\r\n          display=\"flex\"\r\n          flexdirection=\"column\"\r\n          className={classes.ticketGrid}\r\n        >\r\n          <TicketActionsModal category=\"C\" />\r\n          <Typography\r\n            align=\"left\"\r\n            component=\"div\"\r\n            style={{\r\n              padding: '12px 4px',\r\n              marginBottom: '12px'\r\n            }}\r\n          >\r\n            <Box fontWeight=\"fontWeightRegular\" letterSpacing={1} fontSize={16}>\r\n              Services include:\r\n            </Box>\r\n            <Box\r\n              fontWeight=\"fontWeightRegular\"\r\n              letterSpacing={1}\r\n              fontSize={14}\r\n              style={{ paddingLeft: '8px', paddingRight: '8px' }}\r\n            >\r\n              {serviceListC.map(service => (\r\n                <div key={service.id}>\r\n                  <p style={{ marginBottom: '2px' }}>\r\n                    {service.name} - {service.price}sr ~ {service.duration} mins\r\n                  </p>\r\n                  <Divider />\r\n                </div>\r\n              ))}\r\n            </Box>\r\n          </Typography>\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n\r\n  return (\r\n    <Container style={{ padding: '24px' }}>\r\n      {/* Heading */}\r\n      {renderHeading()}\r\n\r\n      {/* Tickets */}\r\n      {renderTickets()}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n","import { useEffect, useState } from 'react';\r\nimport { auth, firestore } from '../firebase';\r\n\r\nconst useAuth = () => {\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const { unsubscribeFromUserSnapshot, unsubscribe } = getUser();\r\n\r\n    return () => {\r\n      unsubscribeFromUserSnapshot && unsubscribeFromUserSnapshot();\r\n      unsubscribe();\r\n    };\r\n  }, []);\r\n\r\n  const getUser = () => {\r\n    let unsubscribeFromUserSnapshot;\r\n    const unsubscribe = auth.onAuthStateChanged(user => {\r\n      if (user) {\r\n        const userRef = firestore.doc(`users/${user.uid}`);\r\n\r\n        unsubscribeFromUserSnapshot = userRef.onSnapshot(snapshot => {\r\n          setCurrentUser({\r\n            id: snapshot.id,\r\n            ...snapshot.data()\r\n          });\r\n        });\r\n      } else {\r\n        setCurrentUser(user);\r\n      }\r\n    });\r\n\r\n    return { unsubscribeFromUserSnapshot, unsubscribe };\r\n  };\r\n\r\n  return currentUser;\r\n};\r\n\r\nexport default useAuth;\r\n","import { useEffect, useState } from 'react';\r\nimport { format } from 'date-fns';\r\n\r\nimport { firestore } from '../firebase';\r\n\r\nconst useTickets = () => {\r\n  const [ticketCollection, setTicketCollection] = useState(null);\r\n\r\n  const currentDate = format(new Date(), 'dd-MM-yyyy');\r\n\r\n  const ticketCollectionDoc = firestore.doc(\r\n    `/ticketCollections/${currentDate}`\r\n  );\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = getTicketCollection();\r\n\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  const getTicketCollection = () => {\r\n    return ticketCollectionDoc.onSnapshot(handleSnapshot);\r\n  };\r\n\r\n  const handleSnapshot = snapshot => {\r\n    const ticketCollection = snapshot.data();\r\n\r\n    setTicketCollection(ticketCollection);\r\n  };\r\n\r\n  return ticketCollection;\r\n};\r\n\r\nexport default useTickets;\r\n","import React from 'react';\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\n\r\nimport './App.css';\r\n\r\nimport Header from './components/header/Header';\r\nimport Footer from './components/footer/Footer';\r\nimport HomePage from './pages/home/HomePage';\r\n\r\nimport { auth, firestore, FirebaseContext } from './firebase';\r\nimport useAuth from './hooks/useAuth';\r\nimport useTickets from './hooks/useTickets';\r\n\r\nconst App = () => {\r\n  const currentUser = useAuth();\r\n\r\n  const ticketCollection = useTickets();\r\n\r\n  console.log(currentUser);\r\n\r\n  return (\r\n    <FirebaseContext.Provider\r\n      value={{ currentUser, ticketCollection, auth, firestore }}\r\n    >\r\n      <div className=\"App\">\r\n        <Router>\r\n          <Header />\r\n\r\n          <Switch>\r\n            <Route exact path=\"/\" component={HomePage} />\r\n          </Switch>\r\n          <Footer />\r\n        </Router>\r\n      </div>\r\n    </FirebaseContext.Provider>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","module.exports = __webpack_public_path__ + \"static/media/logo.9895ae1d.png\";"],"sourceRoot":""}
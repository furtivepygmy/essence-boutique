(this["webpackJsonpessence-hair-salon"]=this["webpackJsonpessence-hair-salon"]||[]).push([[0],{105:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(12),c=a.n(i),l=(a(91),a(42)),o=a(34),s=(a(92),a(43)),u=a(137),m=a(148),p=a(149),g=a(144),d=a(73),f=a.n(d),h=r.a.createContext(null),E=a(78),b=a(13),y=a.n(b),v=a(14),x=a(19),k=a(38),w=a.n(k),S=a(151),C=(a(94),a(98),{apiKey:"AIzaSyCl3YHVKc9VkTGaUqTanbJu5Y3XZKCLdME",authDomain:"essence-hair-salon-7d439.firebaseapp.com",databaseURL:"https://essence-hair-salon-7d439.firebaseio.com",projectId:"essence-hair-salon-7d439",storageBucket:"essence-hair-salon-7d439.appspot.com",messagingSenderId:"38117558785",appId:"1:38117558785:web:c1346e414be66d65d44e00",measurementId:"G-13GHD3BSGZ"}),N=(w.a.initializeApp(C,"Secondary"),function(){var e=Object(x.a)(y.a.mark((function e(t,a,n){var r,i,c,l,o,s,u,m;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:for(r=t.category,i=Object(S.a)(new Date,"dd-MM-yyyy"),c=F.doc("ticketCollections/".concat(i)),l=Object(v.a)({},n,{current:n.current+1}),o="A"===r?{categoryA:l}:"B"===r?{categoryB:l}:{categoryC:l},s=Object(v.a)({},t,{current:!0}),u=[],m=0;m<a.length;m++)a[m].id===t.id?u.push(s):u.push(a[m]);o.tickets=u;try{c.update(o)}catch(p){console.log(p.message)}return e.abrupt("return",c);case 13:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()),B=function(){var e=Object(x.a)(y.a.mark((function e(t,a){var n,r,i,c,l,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:for(n=new Date,r=Object(S.a)(n,"dd-MM-yyyy"),i=F.doc("ticketCollections/".concat(r)),c=Object(v.a)({},t,{closed:!0,current:!1,closedAt:n}),l=[],o=0;o<a.length;o++)a[o].id===t.id?l.push(c):l.push(a[o]);return e.prev=8,e.next=11,i.update({tickets:l});case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(8),console.log(e.t0.message);case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}}),e,null,[[8,13]])})));return function(t,a){return e.apply(this,arguments)}}(),j=function(){var e=Object(x.a)(y.a.mark((function e(t){var a,n,r,i,c,l,o,s,u,m,p,g,d,f,h,b,v,x;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return a=Object(S.a)(new Date,"dd-MM-yyyy"),n=F.doc("ticketCollections/".concat(a)),e.next=6,n.get();case 6:if(r=e.sent,i=t.customerName,c=t.category,l=t.telephone,o=t.email,s=t.currentUser,u=new Date,r.exists){e.next=22;break}return 1,m={id:c+1,customerName:i,category:c,telephone:l,email:o,createdBy:s?{id:s.id,displayName:s.displayName,telephone:s.telephone}:{displayName:i,telephone:l},createdAt:u,current:!1,closed:!1},e.prev=12,e.next=15,n.set({categoryA:{count:"A"===c?1:0,current:0},categoryB:{count:"B"===c?1:0,current:0},categoryC:{count:"C"===c?1:0,current:0},tickets:[m]});case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(12),console.log(e.t0.message);case 20:e.next=34;break;case 22:return p=r.data(),g=p.categoryA,d=p.categoryB,f=p.categoryC,h=p.tickets,"A"===c?(b=g.count+1,v={categoryA:{count:b,current:g.current}}):"B"===c?(b=d.count+1,v={categoryB:{count:b,current:d.current}}):(b=f.count+1,v={categoryC:{count:b,current:f.current}}),x={id:c+b,customerName:i,category:c,telephone:l,email:o,createdBy:s?{id:s.id,displayName:s.displayName,telephone:s.telephone}:{displayName:i,telephone:l},createdAt:u,current:!1,closed:!1},v.tickets=[x].concat(Object(E.a)(h)),e.prev=26,e.next=29,n.update(v);case 29:e.next=34;break;case 31:e.prev=31,e.t1=e.catch(26),console.log(e.t1.message);case 34:return e.abrupt("return",n);case 35:case"end":return e.stop()}}),e,null,[[12,17],[26,31]])})));return function(t){return e.apply(this,arguments)}}(),W=function(e,t){return A.createUserWithEmailAndPassword(e,t).then((function(e){return e.user}))},O=function(){var e=Object(x.a)(y.a.mark((function e(t){var a,n,r,i,c,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=F.doc("users/".concat(t.uid)),e.next=3,a.get();case 3:if(e.sent.exists){e.next=17;break}return n=t.displayName,r=t.telephone,i=t.email,c=new Date,e.prev=7,e.next=10,a.set({displayName:n,telephone:r,email:i,createdAt:c});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),console.log(e.t0.message);case 15:e.next=26;break;case 17:return l=new Date,e.prev=18,e.next=21,a.update({lastLoggedIn:l});case 21:e.next=26;break;case 23:e.prev=23,e.t1=e.catch(18),console.log(e.t1.message);case 26:return e.abrupt("return",a);case 27:case"end":return e.stop()}}),e,null,[[7,12],[18,23]])})));return function(t){return e.apply(this,arguments)}}();w.a.initializeApp(C);var A=w.a.auth(),F=w.a.firestore(),T=new w.a.auth.GoogleAuthProvider;T.setCustomParameters({prompt:"select_account"});w.a;var z=a(10),D=a(146),P=a(155),R=a(140),L=a(142),I=a(156),U=a(106),q=a(152),M=a(143),G=a(145),H=a(147),Z=a(54),V=a.n(Z),Y=Object(u.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},submitButton:{color:"white",marginBottom:e.spacing(1),background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)"}}}));function $(e){var t=e.toggleDrawer,a=e.setShowSignInForm,n=Y(),i=r.a.useState(""),c=Object(z.a)(i,2),l=c[0],o=c[1],s=r.a.useState(""),u=Object(z.a)(s,2),m=u[0],p=u[1],d=r.a.useState(!1),f=Object(z.a)(d,2),h=f[0],E=f[1],b=r.a.useState({}),v=Object(z.a)(b,2),k=v[0],w=v[1],S=function(){var e=Object(x.a)(y.a.mark((function e(t){var a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),l){e.next=5;break}return e.abrupt("return",w({email:"Please enter your email"}));case 5:if(m){e.next=9;break}return e.abrupt("return",w({password:"Please enter your password"}));case 9:if(!l||/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(l)){e.next=11;break}return e.abrupt("return",w({email:"Email is invalid"}));case 11:return w({}),E(!0),e.prev=13,e.next=16,A.signInWithEmailAndPassword(l,m);case 16:return a=e.sent,n=a.user,e.next=20,O({uid:n.uid});case 20:return e.abrupt("return",e.sent);case 23:return e.prev=23,e.t0=e.catch(13),console.log(e.t0.message),E(!1),e.abrupt("return",w({general:e.t0.message}));case 28:case"end":return e.stop()}}),e,null,[[13,23]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(R.a,null,r.a.createElement(L.a,null),r.a.createElement("div",{className:n.paper},r.a.createElement(I.a,{className:n.avatar},r.a.createElement(V.a,null)),r.a.createElement(U.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{onSubmit:S,className:n.form,noValidate:!0},r.a.createElement(q.a,{variant:"outlined",margin:"dense",required:!0,fullWidth:!0,label:"Email",type:"email",autoFocus:!0,value:l,onChange:function(e){var t=e.target;return o(t.value)},error:!!k.email||!!k.general,helperText:k.email?r.a.createElement("span",{style:{color:"red",marginLeft:"-12px"}},k.email):null}),r.a.createElement(q.a,{variant:"outlined",margin:"dense",required:!0,fullWidth:!0,label:"Password",type:"password",value:m,onChange:function(e){var t=e.target;return p(t.value)},error:!!k.password||!!k.general,helperText:k.password?r.a.createElement("span",{style:{color:"red",marginLeft:"-12px"}},k.password):null}),k.general&&r.a.createElement(M.a,{style:{color:"red"}},k.general),r.a.createElement("div",{className:n.submit},r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",className:n.submitButton},h&&r.a.createElement(G.a,{size:20,style:{position:"absolute",left:20,alignSelf:"center",color:"white"}}),"Sign In"),r.a.createElement(g.a,{fullWidth:!0,onClick:t},"Cancel")),r.a.createElement(D.a,{container:!0,justify:"center"},r.a.createElement(D.a,{item:!0},r.a.createElement(H.a,{href:"#",variant:"body2"},"Forgot password?")),r.a.createElement(D.a,{item:!0},r.a.createElement(H.a,{onClick:function(){return a(!1)},variant:"body2",style:{cursor:"pointer"}},"Don't have an account? Sign up now"))))))}var _=Object(u.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)"},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},submitButton:{color:"white",marginBottom:e.spacing(1),background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)"}}})),J={firstName:"",lastName:"",telephone:"",email:"",password:"",confirmPassword:""};function K(e){var t=e.toggleDrawer,a=e.setShowSignInForm,n=_(),i=r.a.useState(J),c=Object(z.a)(i,2),l=c[0],o=c[1],s=r.a.useState({}),u=Object(z.a)(s,2),m=u[0],p=u[1],d=r.a.useState(!1),f=Object(z.a)(d,2),h=f[0],E=f[1],b=l.firstName,k=l.lastName,w=l.telephone,S=l.email,C=l.password,N=l.confirmPassword,B=function(){var e=Object(x.a)(y.a.mark((function e(t){var a,n,r,i,c,l,o,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),b){e.next=5;break}return e.abrupt("return",p({firstName:"First name is required"}));case 5:if(k){e.next=9;break}return e.abrupt("return",p({lastName:"Last name is required"}));case 9:if(w){e.next=13;break}return e.abrupt("return",p({telephone:"Please enter a telephone number"}));case 13:if(S){e.next=17;break}return e.abrupt("return",p({email:"Email is required"}));case 17:if(C){e.next=21;break}return e.abrupt("return",p({password:"Password is required"}));case 21:if(!(C.length<6)){e.next=25;break}return e.abrupt("return",p({password:"Password must be at least 6 characters"}));case 25:if(N){e.next=29;break}return e.abrupt("return",p({confirmPassword:"Please confirm password"}));case 29:if(C===N){e.next=33;break}return e.abrupt("return",p({confirmPassword:"Passwords do not match"}));case 33:if(!S||/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(S)){e.next=35;break}return e.abrupt("return",p({email:"Email is invalid"}));case 35:return E(!0),p({}),a=b.trim(),n=k.trim(),r=a.charAt(0).toUpperCase()+a.substring(1)+" "+n.charAt(0).toUpperCase()+n.substring(1),i=S,e.prev=40,e.next=43,W(i,C);case 43:return c=e.sent,l=c.uid,o=c.email,s={uid:l,displayName:r,telephone:w,email:o},e.next=48,O(s);case 48:return e.abrupt("return",e.sent);case 51:return e.prev=51,e.t0=e.catch(40),console.log(e.t0.message),E(!1),e.abrupt("return",p({email:"Email is already in use"}));case 56:case"end":return e.stop()}}),e,null,[[40,51]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(R.a,{component:"main",maxWidth:"xs"},r.a.createElement(L.a,null),r.a.createElement("div",{className:n.paper},r.a.createElement(I.a,{className:n.avatar},r.a.createElement(V.a,null)),r.a.createElement(U.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{onSubmit:B,className:n.form,noValidate:!0},r.a.createElement(D.a,{container:!0,spacing:1},r.a.createElement(D.a,{item:!0,xs:6},r.a.createElement(q.a,{variant:"outlined",margin:"dense",required:!0,fullWidth:!0,type:"text",label:"First Name",autoFocus:!0,value:b,onChange:function(e){var t=e.target;return o(Object(v.a)({},l,{firstName:t.value}))},error:!!m.firstName})),r.a.createElement(D.a,{item:!0,xs:6},r.a.createElement(q.a,{variant:"outlined",margin:"dense",required:!0,fullWidth:!0,type:"text",label:"Last Name",value:k,onChange:function(e){var t=e.target;return o(Object(v.a)({},l,{lastName:t.value}))},error:!!m.lastName}))),r.a.createElement(M.a,{style:{marginLeft:"2px",marginTop:"-2px",marginBottom:"4px",color:"red"}},m.firstName&&m.firstName,m.lastName&&m.lastName),r.a.createElement(q.a,{variant:"outlined",margin:"dense",required:!0,fullWidth:!0,type:"tel",label:"Telephone",value:w,onChange:function(e){var t=e.target;return o(Object(v.a)({},l,{telephone:t.value}))},error:!!m.telephone,helperText:m.telephone?r.a.createElement("span",{style:{color:"red",marginLeft:"-12px"}},m.telephone):null}),r.a.createElement(q.a,{variant:"outlined",margin:"dense",required:!0,fullWidth:!0,type:"email",label:"Email",value:S,onChange:function(e){var t=e.target;return o(Object(v.a)({},l,{email:t.value}))},error:!!m.email,helperText:m.email?r.a.createElement("span",{style:{color:"red",marginLeft:"-12px"}},m.email):null}),r.a.createElement(q.a,{variant:"outlined",margin:"dense",required:!0,fullWidth:!0,label:"Password",type:"password",value:C,onChange:function(e){var t=e.target;return o(Object(v.a)({},l,{password:t.value}))},error:!!m.password,helperText:m.password?r.a.createElement("span",{style:{color:"red",marginLeft:"-12px"}},m.password):null}),r.a.createElement(q.a,{variant:"outlined",margin:"dense",required:!0,fullWidth:!0,label:"Confirm Password",type:"password",value:N,onChange:function(e){var t=e.target;return o(Object(v.a)({},l,{confirmPassword:t.value}))},error:!!m.confirmPassword,helperText:m.confirmPassword?r.a.createElement("span",{style:{color:"red",marginLeft:"-12px"}},m.confirmPassword):null}),r.a.createElement("div",{className:n.submit},r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",className:n.submitButton},h&&r.a.createElement(G.a,{size:20,style:{position:"absolute",left:20,alignSelf:"center",color:"white"}}),"Create Account"),r.a.createElement(g.a,{fullWidth:!0,onClick:t},"Cancel")),r.a.createElement(D.a,{container:!0,justify:"center"},r.a.createElement(D.a,{item:!0},r.a.createElement(H.a,{onClick:function(){return a(!0)},variant:"body2",style:{cursor:"pointer"}},"Already have an account? Sign in"))))))}var X=Object(u.a)({drawer:{flex:1,width:300,marginTop:"8px",marginBottom:"12px"},authButton:{color:"white",background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)"}});function Q(){var e=X(),t=r.a.useState(!1),a=Object(z.a)(t,2),n=a[0],i=a[1],c=r.a.useState(!0),l=Object(z.a)(c,2),o=l[0],s=l[1],u=function(){return i((function(e){return!e}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{color:"primary",className:e.authButton,variant:"contained",onClick:u},"Sign In"),r.a.createElement(P.a,{anchor:"right",open:n,onClose:u},r.a.createElement(D.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:e.drawer},o?r.a.createElement($,{toggleDrawer:u,setShowSignInForm:function(e){return s(e)}}):r.a.createElement(K,{toggleDrawer:u,setShowSignInForm:function(e){return s(e)}}))))}var ee=Object(u.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(s.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),sectionDesktop:Object(s.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(s.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),offset:e.mixins.toolbar,toolbar:{backgroundColor:"white",color:"black"},imageDiv:{marginRight:"10px",height:"32px"},image:{height:"32px"},authButton:{color:"white",background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)"}}})),te=function(){var e=r.a.useContext(h).currentUser,t=ee();return r.a.createElement("div",{className:t.grow},r.a.createElement(m.a,{position:"fixed"},r.a.createElement(p.a,{className:t.toolbar},r.a.createElement(g.a,{component:l.b,to:"/"},r.a.createElement("div",{className:t.imageDiv},r.a.createElement("img",{src:f.a,alt:"Essence",className:t.image}))),r.a.createElement("div",{className:t.grow}),e?r.a.createElement(g.a,{className:t.authButton,variant:"contained",onClick:function(){return A.signOut()}},"Sign Out"):r.a.createElement(Q,null))),r.a.createElement("div",{className:t.offset}))},ae=Object(u.a)((function(e){return{root:{display:"flex",flexDirection:"column",minHeight:"18vh"},main:{marginTop:e.spacing(8),marginBottom:e.spacing(2)},footer:{padding:e.spacing(3,2),marginTop:"auto",background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",color:"white"}}})),ne=function(){return r.a.createElement(U.a,{variant:"body2",color:"inherit"},"Copyright \xa9 ",r.a.createElement(H.a,{component:l.b,color:"inherit",to:"/"},"Essence Hair Salon")," ",(new Date).getFullYear(),".")},re=function(){var e=ae();return r.a.createElement("div",{className:e.root},r.a.createElement("footer",{className:e.footer},r.a.createElement(R.a,{maxWidth:"sm"},r.a.createElement(ne,null))))},ie=a(153),ce=a(150),le=a(107),oe=[{id:0,name:"Haircut (Men)",category:"A",price:150,duration:15},{id:1,name:"Haircut (Woman)",category:"B",price:250,duration:45},{id:2,name:"Hair treatment",category:"C",price:350,duration:75},{id:3,name:"Eyebrows",category:"A",price:150,duration:15},{id:4,name:"Hair coloring",category:"B",price:250,duration:45},{id:5,name:"Bleach bath",category:"C",price:350,duration:75},{id:6,name:"Manicure",category:"A",price:150,duration:15},{id:7,name:"Shampoo & blow dry",category:"B",price:250,duration:75},{id:8,name:"Perm",category:"C",price:350,duration:75}],se=a(57),ue=a.n(se),me=Object(u.a)((function(e){return{paper:{display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)"},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},submitButton:{color:"white",marginBottom:e.spacing(1),background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)"}}})),pe={firstName:"",lastName:"",telephone:"",email:""},ge=function(e){var t=e.toggleDrawer,a=e.currentUser,n=e.category,i=e.setShowTicketControls,c=me(),l=r.a.useState(pe),o=Object(z.a)(l,2),s=o[0],u=o[1],m=r.a.useState({}),p=Object(z.a)(m,2),d=p[0],f=p[1],h=r.a.useState(!1),E=Object(z.a)(h,2),b=E[0],k=E[1];r.a.useEffect((function(){if(a&&!a.isAdmin){var e=a.displayName,t=a.telephone,n=a.email,r=e.split(" "),i=r[0],c=r[1];u({firstName:i,lastName:c,telephone:t,email:n})}}),[a]);var w=s.firstName,S=s.lastName,C=s.telephone,N=s.email,B=function(){var e=Object(x.a)(y.a.mark((function e(r){var i,c,l,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),w){e.next=5;break}return e.abrupt("return",f({firstName:"First name is required"}));case 5:if(S){e.next=9;break}return e.abrupt("return",f({lastName:"Last name is required"}));case 9:if(C){e.next=13;break}return e.abrupt("return",f({telephone:"Please enter a telephone number"}));case 13:if(!N||/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(N)){e.next=15;break}return e.abrupt("return",f({email:"Email is invalid"}));case 15:return k(!0),f({}),i=w.trim(),c=S.trim(),l=i.charAt(0).toUpperCase()+i.substring(1)+" "+c.charAt(0).toUpperCase()+c.substring(1),e.prev=19,o={customerName:l,category:n,telephone:C,email:N||null,currentUser:a||null},e.next=23,j(o);case 23:return e.abrupt("return",t());case 26:return e.prev=26,e.t0=e.catch(19),console.log(e.t0.message),k(!1),e.abrupt("return",f({general:e.t0.message}));case 31:case"end":return e.stop()}}),e,null,[[19,26]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(R.a,{component:"main",maxWidth:"xs"},r.a.createElement(L.a,null),r.a.createElement("div",{className:c.paper},r.a.createElement(I.a,{className:c.avatar},r.a.createElement(ue.a,null)),r.a.createElement(U.a,{component:"h1",variant:"h5"},"Create ticket"),r.a.createElement("small",null,"Catergory - ",n),r.a.createElement("small",null,"Enter your details"),r.a.createElement("form",{onSubmit:B,className:c.form,noValidate:!0},r.a.createElement(D.a,{container:!0,spacing:1},r.a.createElement(D.a,{item:!0,xs:6},r.a.createElement(q.a,{variant:"outlined",margin:"dense",required:!0,fullWidth:!0,type:"text",label:"First Name",autoFocus:!0,value:w,onChange:function(e){var t=e.target;return u(Object(v.a)({},s,{firstName:t.value}))},error:!!d.firstName})),r.a.createElement(D.a,{item:!0,xs:6},r.a.createElement(q.a,{variant:"outlined",margin:"dense",required:!0,fullWidth:!0,type:"text",label:"Last Name",value:S,onChange:function(e){var t=e.target;return u(Object(v.a)({},s,{lastName:t.value}))},error:!!d.lastName}))),r.a.createElement(M.a,{style:{marginLeft:"2px",marginTop:"-2px",marginBottom:"4px",color:"red"}},d.firstName&&d.firstName,d.lastName&&d.lastName),r.a.createElement(q.a,{variant:"outlined",margin:"dense",required:!0,fullWidth:!0,type:"tel",label:"Telephone",value:C,onChange:function(e){var t=e.target;return u(Object(v.a)({},s,{telephone:t.value}))},error:!!d.telephone,helperText:d.telephone?r.a.createElement("span",{style:{color:"red",marginLeft:"-12px"}},d.telephone):null}),r.a.createElement(q.a,{variant:"outlined",margin:"dense",fullWidth:!0,type:"email",label:"Email",value:N,onChange:function(e){var t=e.target;return u(Object(v.a)({},s,{email:t.value}))},error:!!d.email,helperText:d.email?r.a.createElement("span",{style:{color:"red",marginLeft:"-12px"}},d.email):null}),r.a.createElement("div",{className:c.submit},r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",className:c.submitButton},b&&r.a.createElement(G.a,{size:20,style:{position:"absolute",left:20,alignSelf:"center",color:"white"}}),"Create Ticket"),r.a.createElement(g.a,{fullWidth:!0,onClick:t},"Cancel")),i&&r.a.createElement(D.a,{container:!0,justify:"center"},r.a.createElement(D.a,{item:!0},r.a.createElement(H.a,{onClick:function(){return i(!0)},variant:"body2",style:{cursor:"pointer"}},"Go to control panel"))))))},de=a(158),fe=a(157),he=Object(u.a)((function(e){return{typography:{padding:e.spacing(2)}}})),Ee=function(e){var t,a=e.ticket,n=e.showStatusChip,i=he(),c=r.a.useState(null),l=Object(z.a)(c,2),o=l[0],s=l[1],u=Boolean(o),m=u?"simple-popover":void 0;switch(a.category){case"A":t={background:"linear-gradient(45deg, #e65c00 30%, #f9d423 90%)"};break;case"B":t={background:"linear-gradient(45deg, #5433ff 30%, #20bdff 90%)"};break;case"C":t={background:"linear-gradient(45deg, #cc2b5e 30%, #753a88 90%)"}}return r.a.createElement("div",null,r.a.createElement(g.a,{"aria-describedby":m,variant:"contained",color:"primary",style:Object(v.a)({padding:"6px 12px",margin:"2px",opacity:a.closed?"55%":"85%"},t),onClick:function(e){s(e.currentTarget)}},a.id,a.current&&n&&r.a.createElement(de.a,{style:{background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)",position:"absolute",alignSelf:"center",right:72},label:"In Progress",color:"primary",size:"small"}),a.closed&&n&&r.a.createElement(de.a,{style:{position:"absolute",alignSelf:"center",right:72},label:"Closed",color:"primary",size:"small"})),r.a.createElement(fe.a,{id:m,open:u,anchorEl:o,onClose:function(){s(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(U.a,{className:i.typography,component:"div"},r.a.createElement(ie.a,{fontWeight:"fontWeightRegular",letterSpacing:2,fontSize:14},"Status:"," ",r.a.createElement("strong",null,a.closed&&"Closed",a.current&&"In Progress",!a.closed&&!a.current&&"Upcoming"),r.a.createElement("br",null),"Ticket no. ",r.a.createElement("strong",null,a.id),r.a.createElement("br",null),"Customer: ",r.a.createElement("strong",null,a.customerName),r.a.createElement("br",null),"Telephone: ",r.a.createElement("strong",null,a.telephone),r.a.createElement("br",null),"Email: ",a.email?r.a.createElement("strong",null,a.email):"-",r.a.createElement("br",null),"Created at"," ",r.a.createElement("strong",null,Object(S.a)(a.createdAt.toDate(),"HH:mm")," today"),r.a.createElement("br",null),a.closed&&"Closed at ",a.closed&&r.a.createElement("strong",null,Object(S.a)(a.closedAt.toDate(),"HH:mm")," today")))))},be=Object(u.a)((function(e){return{submit:{margin:e.spacing(3,2,2)},submitButton:{color:"white",marginBottom:e.spacing(1),background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)"}}})),ye=function(e){var t=e.setShowTicketControls,a=e.category,n=e.toggleDrawer,i=r.a.useContext(h).ticketCollection,c=be(),l=r.a.useState(!1),o=Object(z.a)(l,2),s=o[0],u=o[1];if(!i)return t(!1),null;var m=i.tickets,p=m.filter((function(e){return e.category===a})),d=p.filter((function(e){return!e.closed}));return r.a.createElement(D.a,{container:!0,justify:"center"},r.a.createElement(U.a,{align:"center",component:"div"},r.a.createElement(D.a,{item:!0,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},r.a.createElement(I.a,{style:{background:"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)"}},r.a.createElement(ue.a,null)),r.a.createElement(U.a,{align:"center",component:"div"},r.a.createElement(ie.a,{fontWeight:"fontWeightRegular",fontSize:24,letterSpacing:1,m:2},"Admin Control Panel"),r.a.createElement(ie.a,{fontWeight:"fontWeightRegular",fontSize:20,letterSpacing:1},"Category ",a))),0===p.length?r.a.createElement(ie.a,{fontWeight:"fontWeightRegular",fontSize:14,letterSpacing:1,m:2},"There are 0 tickets under this category"):r.a.createElement(ie.a,{fontWeight:"fontWeightRegular",fontSize:14,letterSpacing:1,m:2},"Total tickets: ",p.length,r.a.createElement("br",null),"Open tickets: ",d.length,r.a.createElement("br",null),"Closed tickets: ",p.length-d.length,r.a.createElement("br",null)),p.reverse().map((function(e){return r.a.createElement(Ee,{key:e.id,ticket:e,showStatusChip:!0})})),r.a.createElement("div",{style:{margin:"20px 12px"}},r.a.createElement(ce.a,null)),function(){var e=d.find((function(e){return e.current})),t=0===d.length,l=t?null:d[d.length-1],o="A"===a?i.categoryA:"B"===a?i.categoryB:i.categoryC;return r.a.createElement("div",{className:c.submit},r.a.createElement(ie.a,{fontWeight:"fontWeightRegular",fontSize:14,letterSpacing:1,m:2},e&&"Current ticket: ".concat(e.id)),e?r.a.createElement(g.a,{fullWidth:!0,variant:"contained",className:c.submitButton,onClick:Object(x.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u(!0),t.next=3,B(e,m);case 3:return t.abrupt("return",u(!1));case 4:case"end":return t.stop()}}),t)})))},s&&r.a.createElement(G.a,{size:20,style:{position:"absolute",left:20,alignSelf:"center",color:"white"}}),"Complete Ticket"):r.a.createElement(g.a,{fullWidth:!0,variant:"contained",className:c.submitButton,onClick:Object(x.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,N(l,m,o);case 3:return e.abrupt("return",u(!1));case 4:case"end":return e.stop()}}),e)}))),disabled:t},s&&r.a.createElement(G.a,{size:20,style:{position:"absolute",left:20,alignSelf:"center",color:"white"}}),"Start Next Ticket"),r.a.createElement(g.a,{fullWidth:!0,onClick:n},"Cancel"))}()),r.a.createElement(D.a,{item:!0},r.a.createElement(D.a,{item:!0},r.a.createElement(H.a,{onClick:function(){return t(!1)},variant:"body2",style:{cursor:"pointer"}},"Create a ticket for a customer"))))},ve=Object(u.a)((function(e){return{drawer:{flex:1,width:300,paddingTop:"24px",paddingBottom:"24px"},ticketButton:{display:"flex",height:e.spacing(24),opacity:"75%"}}})),xe=function(e){var t,a=e.category,n=r.a.useContext(h),i=n.currentUser,c=n.ticketCollection,l=ve(),o=r.a.useState(!1),s=Object(z.a)(o,2),u=s[0],m=s[1],p=r.a.useState(!0),d=Object(z.a)(p,2),f=d[0],E=d[1];t="A"===a?{background:"linear-gradient(45deg, #e65c00 30%, #f9d423 90%)"}:"B"===a?{background:"linear-gradient(45deg, #5433ff 30%, #20bdff 90%)"}:{background:"linear-gradient(45deg, #cc2b5e 30%, #753a88 90%)"};var b=function(){return i&&i.isAdmin&&E(!0),m((function(e){return!e}))},y=function(){if(!c)return r.a.createElement(U.a,{component:"div"},r.a.createElement(ie.a,{letterSpacing:3,fontWeight:"fontWeightRegular",fontSize:96},"+"));var e,t=c.categoryA,n=c.categoryB,i=c.categoryC;return e="A"===a?0===t.current?"+":"A".concat(t.current):"B"===a?0===n.current?"+":"B".concat(n.current):0===i.current?"+":"C".concat(i.current),r.a.createElement(U.a,{component:"div"},r.a.createElement(ie.a,{letterSpacing:3,fontWeight:"fontWeightRegular",fontSize:96},e))};return r.a.createElement(r.a.Fragment,null,function(){if(!i)return r.a.createElement(g.a,{fullWidth:!0,color:"primary",variant:"contained",className:l.ticketButton,style:t,onClick:function(){}},y());if(!c)return r.a.createElement(g.a,{fullWidth:!0,color:"primary",variant:"contained",className:l.ticketButton,style:t,onClick:b},y());var e=c.tickets.filter((function(e){return e.createdBy.id&&e.createdBy.id===i.id&&!e.closed})).length>=3;return r.a.createElement(g.a,{fullWidth:!0,color:"primary",variant:"contained",className:l.ticketButton,style:!i.isAdmin&&e?Object(v.a)({},t,{opacity:"55%"}):t,onClick:!i.isAdmin&&e?function(){}:b},y())}(),r.a.createElement(P.a,{anchor:"left",open:u,onClose:b},function(){var e;return e=i&&i.isAdmin?f?r.a.createElement(ye,{category:a,setShowTicketControls:E,toggleDrawer:b}):r.a.createElement(ge,{toggleDrawer:b,category:a,currentUser:i,setShowTicketControls:E}):r.a.createElement(ge,{toggleDrawer:b,currentUser:i,category:a}),r.a.createElement(D.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:l.drawer},e)}()))},ke=oe.filter((function(e){return"A"===e.category})),we=oe.filter((function(e){return"B"===e.category})),Se=oe.filter((function(e){return"C"===e.category})),Ce=Object(u.a)((function(e){return{tickets:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",marginTop:"12px","& > *":{margin:e.spacing(1),width:e.spacing(36)}},ticketGrid:{padding:0}}})),Ne=function(){var e=r.a.useContext(h),t=e.currentUser,a=e.ticketCollection,n=Ce(),i=function(){return r.a.createElement(ie.a,{fontWeight:"fontWeightRegular",letterSpacing:6,fontSize:24},Object(S.a)(new Date,"do MMMM yyyy"))},c=function(){var e=Number(Object(S.a)(new Date,"H")),a="";if(a=e>=2&&e<12?"Good Morning":e>=12&&e<6?"Good Afternoon":"Good Evening",t){var n=t.displayName?t.displayName.split(" ")[0]:null;return r.a.createElement(ie.a,{fontWeight:"fontWeightLight",letterSpacing:3,fontSize:48},a+", "+n)}return r.a.createElement(ie.a,{fontWeight:"fontWeightLight",letterSpacing:3,fontSize:48},a)},l=function(){var e=a.tickets.filter((function(e){return e.createdBy.id&&e.createdBy.id===t.id&&!e.closed})),n=e.map((function(e){return r.a.createElement(Ee,{key:e.id,ticket:e})}));return r.a.createElement(U.a,{align:"center",component:"div"},r.a.createElement(ie.a,{fontWeight:"fontWeightRegular",letterSpacing:2,fontSize:20,mt:2},0===e.length?"View upcoming tickets here":"Upcoming tickets"),r.a.createElement(D.a,{container:!0,style:{display:"flex",marginTop:"12px",marginBottom:"20px",paddingLeft:"8px",paddingRight:"8px",justifyContent:"center",alignContent:"flex-start"}},n),!t.isAdmin&&e.length>=3&&r.a.createElement(ie.a,{fontWeight:"fontWeightRegular",letterSpacing:2,fontSize:14,pb:1,px:4},"You have reached a maximum of 3 tickets"))};return r.a.createElement(R.a,{style:{padding:"24px"}},r.a.createElement(D.a,{container:!0,direction:"row",justify:"center",style:{paddingBottom:"24px"}},r.a.createElement(D.a,{item:!0,xs:12,md:8},r.a.createElement(U.a,{align:"left",component:"div"},i(),c()),r.a.createElement(U.a,{variant:"h6",align:"left"},!t&&r.a.createElement(ie.a,{fontWeight:"fontWeightRegular",letterSpacing:2,fontSize:14},"Sign in or create an account to create ticket.",r.a.createElement("br",null),"Alternatively, give us a call and our team will create a ticket for you on your behalf.",r.a.createElement("br",null),"We also accept walk-ins."),r.a.createElement("div",{style:{margin:"8px 0",paddingRight:"24px"}},r.a.createElement(ce.a,null)),r.a.createElement(ie.a,{fontWeight:"fontWeightRegular",letterSpacing:2,fontSize:14},"Get started by selecting one of the three ticket categories below.",r.a.createElement("br",null),"Each ticket category covers a different set of services."))),r.a.createElement(D.a,{item:!0,xs:12,md:4,style:{marginTop:"24px"}},t&&r.a.createElement(le.a,{elevation:3,style:{display:"flex",flex:1,height:"100%",justifyContent:"center",alignItems:"center"}},!a&&r.a.createElement(U.a,{align:"center",component:"div"},r.a.createElement(ie.a,{fontWeight:"fontWeightRegular",letterSpacing:2,fontSize:20},"View upcoming tickets here")),a&&l()))),r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,null,r.a.createElement(U.a,{variant:"h6"},r.a.createElement(ie.a,{fontWeight:"fontWeightLight",letterSpacing:2,fontSize:32},"- Currently Serving -"))),r.a.createElement(D.a,{container:!0,className:n.tickets},r.a.createElement(D.a,{display:"flex",flexdirection:"column",className:n.ticketGrid},r.a.createElement(xe,{category:"A"}),r.a.createElement(U.a,{align:"left",component:"div",style:{padding:"12px 4px",marginBottom:"12px"}},r.a.createElement(ie.a,{fontWeight:"fontWeightRegular",letterSpacing:1,fontSize:16},"Services include:"),r.a.createElement(ie.a,{fontWeight:"fontWeightRegular",letterSpacing:1,fontSize:14,style:{paddingLeft:"8px",paddingRight:"8px"}},ke.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("p",{style:{marginBottom:"2px"}},e.name," - ",e.price,"sr ~ ",e.duration," mins"),r.a.createElement(ce.a,null))}))))),r.a.createElement(D.a,{display:"flex",flexdirection:"column",className:n.ticketGrid},r.a.createElement(xe,{category:"B"}),r.a.createElement(U.a,{align:"left",component:"div",style:{padding:"12px 4px",marginBottom:"12px"}},r.a.createElement(ie.a,{fontWeight:"fontWeightRegular",letterSpacing:1,fontSize:16},"Services include:"),r.a.createElement(ie.a,{fontWeight:"fontWeightRegular",letterSpacing:1,fontSize:14,style:{paddingLeft:"8px",paddingRight:"8px"}},we.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("p",{style:{marginBottom:"2px"}},e.name," - ",e.price,"sr ~ ",e.duration," mins"),r.a.createElement(ce.a,null))}))))),r.a.createElement(D.a,{display:"flex",flexdirection:"column",className:n.ticketGrid},r.a.createElement(xe,{category:"C"}),r.a.createElement(U.a,{align:"left",component:"div",style:{padding:"12px 4px",marginBottom:"12px"}},r.a.createElement(ie.a,{fontWeight:"fontWeightRegular",letterSpacing:1,fontSize:16},"Services include:"),r.a.createElement(ie.a,{fontWeight:"fontWeightRegular",letterSpacing:1,fontSize:14,style:{paddingLeft:"8px",paddingRight:"8px"}},Se.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("p",{style:{marginBottom:"2px"}},e.name," - ",e.price,"sr ~ ",e.duration," mins"),r.a.createElement(ce.a,null))}))))))))},Be=function(){var e=Object(n.useState)(null),t=Object(z.a)(e,2),a=t[0],r=t[1];Object(n.useEffect)((function(){var e=i(),t=e.unsubscribeFromUserSnapshot,a=e.unsubscribe;return function(){t&&t(),a()}}),[]);var i=function(){var e,t=A.onAuthStateChanged((function(t){if(t){var a=F.doc("users/".concat(t.uid));e=a.onSnapshot((function(e){r(Object(v.a)({id:e.id},e.data()))}))}else r(t)}));return{unsubscribeFromUserSnapshot:e,unsubscribe:t}};return a},je=function(){var e=Object(n.useState)(null),t=Object(z.a)(e,2),a=t[0],r=t[1],i=Object(S.a)(new Date,"dd-MM-yyyy"),c=F.doc("/ticketCollections/".concat(i));Object(n.useEffect)((function(){var e=l();return function(){return e()}}),[]);var l=function(){return c.onSnapshot(o)},o=function(e){var t=e.data();r(t)};return a},We=function(){var e=Be(),t=je();return console.log(e),r.a.createElement(h.Provider,{value:{currentUser:e,ticketCollection:t,auth:A,firestore:F}},r.a.createElement("div",{className:"App"},r.a.createElement(l.a,null,r.a.createElement(te,null),r.a.createElement(o.c,null,r.a.createElement(o.a,{exact:!0,path:"/",component:Ne})),r.a.createElement(re,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(We,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},73:function(e,t,a){e.exports=a.p+"static/media/logo.9895ae1d.png"},86:function(e,t,a){e.exports=a(105)},91:function(e,t,a){},92:function(e,t,a){}},[[86,1,2]]]);
//# sourceMappingURL=main.d81f99cd.chunk.js.map